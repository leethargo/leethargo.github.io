<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Consonant Triads | Frequently Answered Quantitatively</title>
<link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/html4css1.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#777777">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://leethargo.github.io/posts/consonant-triads/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><link rel="prev" href="../marginal-net-income-in-germany/" title="Marginal Net Income in Germany" type="text/html">
<link rel="next" href="../infant-formula-cows-milk-and-nutrional-blending/" title="Infant Formula, Cow's Milk and Nutrional Blending" type="text/html">
<meta property="og:site_name" content="Frequently Answered Quantitatively">
<meta property="og:title" content="Consonant Triads">
<meta property="og:url" content="https://leethargo.github.io/posts/consonant-triads/">
<meta property="og:description" content="We use a physiological interpretation of consonance and dissonant musical sound for human listeners and use a dissonance score to rate different possible triads (combinations of three notes in a scale">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-05-30T11:00:00+02:00">
<meta property="article:tag" content="julialang">
<meta property="article:tag" content="microtonal">
<meta property="article:tag" content="music">
<meta property="article:tag" content="xenharmonic">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://leethargo.github.io/">

                <span id="blog-title">Frequently Answered Quantitatively</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.ipynb" id="sourcelink">Source</a>
    </li>
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Consonant Triads</a></h1>

        <div class="metadata">
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2018-05-30T11:00:00+02:00" itemprop="datePublished" title="2018-05-30">2018-05-30</time></a></p>
                    <p class="sourceline"><a href="index.ipynb" class="sourcelink">Source</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We use a physiological interpretation of consonance and dissonant musical sound for human listeners and use a dissonance score to rate different possible triads (combinations of three notes in a scale). This is first done on the conventional scale of 12 equidistant tones in an octave, as well as the Bohlen-Pierce scale.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="k">using</span> <span class="n">Plots</span>
<span class="n">gr</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[1]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Plots.GRBackend()</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Plomp-Levelt-dissonance-curve">Plomp-Levelt dissonance curve<a class="anchor-link" href="#Plomp-Levelt-dissonance-curve">¶</a>
</h3>
<p>As a basis of our investigation, we use the Plomp-Levelt dissonance curve as explained in <a href="http://sethares.engr.wisc.edu/consemi.html">this article</a> by William Sethares.</p>
<p>The curve models the fact that similar frequencies appear dissonant because of "friction" between the adjacent sensors in our ears.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="s">"Dissonance of sound with two sinusoidal sounds with given frequencies and amplitudes."</span>
<span class="k">function</span> <span class="n">diss</span><span class="p">(</span><span class="n">freq1</span><span class="p">,</span> <span class="n">ampl1</span><span class="p">,</span> <span class="n">freq2</span><span class="p">,</span> <span class="n">ampl2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">freq2</span> <span class="o">&lt;</span> <span class="n">freq1</span> <span class="c"># swap args</span>
        <span class="k">return</span> <span class="n">diss</span><span class="p">(</span><span class="n">freq2</span><span class="p">,</span> <span class="n">ampl2</span><span class="p">,</span> <span class="n">freq1</span><span class="p">,</span> <span class="n">ampl1</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mf">0.24</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq2</span> <span class="o">-</span> <span class="n">freq1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mf">0.0207</span> <span class="o">*</span> <span class="n">freq1</span> <span class="o">+</span> <span class="mf">18.96</span><span class="p">)</span>
    <span class="mf">5.0</span> <span class="o">*</span> <span class="n">ampl1</span> <span class="o">*</span> <span class="n">ampl2</span> <span class="o">*</span> <span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">3.51</span> <span class="o">*</span> <span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">5.75</span> <span class="o">*</span> <span class="n">s</span><span class="p">))</span>
<span class="k">end</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>diss</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's draw the curve for a pair of sine waves, the first fixed at given base frequency and the other going through a range of relatively higher frequencies.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">basefreq</span> <span class="o">=</span> <span class="mf">440.0</span>
<span class="n">ratrange</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">otherfreq</span> <span class="o">=</span> <span class="n">basefreq</span> <span class="o">*</span> <span class="n">ratrange</span>
<span class="n">disss</span> <span class="o">=</span> <span class="n">diss</span><span class="o">.</span><span class="p">(</span><span class="n">basefreq</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">otherfreq</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">otherfreq</span><span class="p">,</span> <span class="n">disss</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s">"Frequency"</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s">"Dissonance"</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">false</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[4]:</div>



<div class="output_svg output_subarea output_execute_result">
<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewbox="0 0 600 400"><defs><clippath id="clip0800"><rect x="0" y="0" width="600" height="400"></rect></clippath></defs><polygon clip-path="url(#clip0800)" points="
0,400 600,400 600,0 0,0 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip0801"><rect x="120" y="0" width="421" height="400"></rect></clippath></defs><polygon clip-path="url(#clip0800)" points="
48.2225,360.121 580.315,360.121 580.315,11.811 48.2225,11.811 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip0802"><rect x="48" y="11" width="533" height="349"></rect></clippath></defs><polyline clip-path="url(#clip0802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  144.967,360.121 144.967,11.811 
  "></polyline><polyline clip-path="url(#clip0802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  265.897,360.121 265.897,11.811 
  "></polyline><polyline clip-path="url(#clip0802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  386.827,360.121 386.827,11.811 
  "></polyline><polyline clip-path="url(#clip0802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  507.757,360.121 507.757,11.811 
  "></polyline><polyline clip-path="url(#clip0802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,360.121 580.315,360.121 
  "></polyline><polyline clip-path="url(#clip0802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,282.581 580.315,282.581 
  "></polyline><polyline clip-path="url(#clip0802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,205.041 580.315,205.041 
  "></polyline><polyline clip-path="url(#clip0802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,127.502 580.315,127.502 
  "></polyline><polyline clip-path="url(#clip0802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,49.9622 580.315,49.9622 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,360.121 580.315,360.121 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,360.121 48.2225,11.811 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  144.967,360.121 144.967,354.896 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  265.897,360.121 265.897,354.896 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  386.827,360.121 386.827,354.896 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  507.757,360.121 507.757,354.896 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,360.121 56.2039,360.121 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,282.581 56.2039,282.581 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,205.041 56.2039,205.041 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,127.502 56.2039,127.502 
  "></polyline><polyline clip-path="url(#clip0800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,49.9622 56.2039,49.9622 
  "></polyline><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 144.967, 373.921)" x="144.967" y="373.921">600</text></g><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 265.897, 373.921)" x="265.897" y="373.921">800</text></g><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 386.827, 373.921)" x="386.827" y="373.921">1000</text></g><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 507.757, 373.921)" x="507.757" y="373.921">1200</text></g><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 42.2225, 364.621)" x="42.2225" y="364.621">0.0</text></g><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 42.2225, 287.081)" x="42.2225" y="287.081">0.2</text></g><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 42.2225, 209.541)" x="42.2225" y="209.541">0.4</text></g><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 42.2225, 132.002)" x="42.2225" y="132.002">0.6</text></g><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 42.2225, 54.4622)" x="42.2225" y="54.4622">0.8</text></g><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:16; text-anchor:middle;" transform="rotate(0, 314.269, 397.6)" x="314.269" y="397.6">Frequency</text></g><g clip-path="url(#clip0800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:16; text-anchor:middle;" transform="rotate(-90, 14.4, 185.966)" x="14.4" y="185.966">Dissonance</text></g><polyline clip-path="url(#clip0802)" style="stroke:#009af9; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,360.121 50.8964,222.26 53.5702,128.474 56.244,68.0184 58.9179,32.5166 61.5917,15.4589 64.2655,11.811 66.9393,17.7002 69.6132,30.1661 72.287,46.9631 
  74.9608,66.4037 77.6347,87.235 80.3085,108.54 82.9823,129.662 85.6562,150.141 88.33,169.67 91.0038,188.056 93.6777,205.189 96.3515,221.024 99.0253,235.559 
  101.699,248.826 104.373,260.876 107.047,271.777 109.721,281.604 112.394,290.434 115.068,298.349 117.742,305.425 120.416,311.74 123.09,317.364 125.764,322.365 
  128.437,326.806 131.111,330.744 133.785,334.232 136.459,337.319 139.133,340.047 141.807,342.457 144.48,344.584 147.154,346.46 149.828,348.114 152.502,349.571 
  155.176,350.853 157.85,351.982 160.523,352.975 163.197,353.848 165.871,354.616 168.545,355.29 171.219,355.883 173.893,356.403 176.566,356.86 179.24,357.262 
  181.914,357.614 184.588,357.923 187.262,358.194 189.936,358.432 192.609,358.64 195.283,358.823 197.957,358.983 200.631,359.124 203.305,359.247 205.979,359.355 
  208.652,359.45 211.326,359.533 214,359.606 216.674,359.67 219.348,359.726 222.022,359.775 224.695,359.818 227.369,359.855 230.043,359.888 232.717,359.917 
  235.391,359.942 238.065,359.964 240.738,359.984 243.412,360.001 246.086,360.016 248.76,360.029 251.434,360.04 254.108,360.05 256.781,360.059 259.455,360.067 
  262.129,360.073 264.803,360.079 267.477,360.084 270.151,360.089 272.824,360.093 275.498,360.096 278.172,360.099 280.846,360.102 283.52,360.104 286.194,360.106 
  288.867,360.108 291.541,360.11 294.215,360.111 296.889,360.112 299.563,360.113 302.237,360.114 304.91,360.115 307.584,360.116 310.258,360.116 312.932,360.117 
  315.606,360.117 318.279,360.118 320.953,360.118 323.627,360.118 326.301,360.119 328.975,360.119 331.649,360.119 334.322,360.119 336.996,360.119 339.67,360.12 
  342.344,360.12 345.018,360.12 347.692,360.12 350.365,360.12 353.039,360.12 355.713,360.12 358.387,360.12 361.061,360.12 363.735,360.12 366.408,360.12 
  369.082,360.12 371.756,360.12 374.43,360.12 377.104,360.12 379.778,360.121 382.451,360.121 385.125,360.121 387.799,360.121 390.473,360.121 393.147,360.121 
  395.821,360.121 398.494,360.121 401.168,360.121 403.842,360.121 406.516,360.121 409.19,360.121 411.864,360.121 414.537,360.121 417.211,360.121 419.885,360.121 
  422.559,360.121 425.233,360.121 427.907,360.121 430.58,360.121 433.254,360.121 435.928,360.121 438.602,360.121 441.276,360.121 443.95,360.121 446.623,360.121 
  449.297,360.121 451.971,360.121 454.645,360.121 457.319,360.121 459.993,360.121 462.666,360.121 465.34,360.121 468.014,360.121 470.688,360.121 473.362,360.121 
  476.036,360.121 478.709,360.121 481.383,360.121 484.057,360.121 486.731,360.121 489.405,360.121 492.079,360.121 494.752,360.121 497.426,360.121 500.1,360.121 
  502.774,360.121 505.448,360.121 508.122,360.121 510.795,360.121 513.469,360.121 516.143,360.121 518.817,360.121 521.491,360.121 524.165,360.121 526.838,360.121 
  529.512,360.121 532.186,360.121 534.86,360.121 537.534,360.121 540.207,360.121 542.881,360.121 545.555,360.121 548.229,360.121 550.903,360.121 553.577,360.121 
  556.25,360.121 558.924,360.121 561.598,360.121 564.272,360.121 566.946,360.121 569.62,360.121 572.293,360.121 574.967,360.121 577.641,360.121 580.315,360.121 
  
  "></polyline></svg>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Dissonance-with-harmonics">Dissonance with harmonics<a class="anchor-link" href="#Dissonance-with-harmonics">¶</a>
</h3>
<p>Rather than analyzing dissonance between sinusoidal sounds, we also want to consider sounds with rich harmonics. These have sounds at multiple frequencies with declining amplitudes. When computing the dissonance between two pitches with harmonics, we have to add the dissonance values for all combinations of frequencies.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># Let's first give formulas for the amplitudes of common waveshapes.</span>

<span class="n">enumrange</span><span class="p">(</span><span class="n">number</span><span class="o">::</span><span class="kt">Int</span><span class="p">)</span> <span class="o">=</span> <span class="n">collect</span><span class="p">(</span><span class="n">linspace</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">number</span><span class="p">))</span>

<span class="k">abstract</span> <span class="k">type</span> <span class="n">Wave</span> <span class="k">end</span>

<span class="k">type</span> <span class="n">Sine</span> <span class="o">&lt;:</span> <span class="n">Wave</span> <span class="k">end</span>
<span class="n">harm</span><span class="p">(</span><span class="o">::</span><span class="n">Sine</span><span class="p">,</span> <span class="n">number</span><span class="o">::</span><span class="kt">Int</span><span class="p">)</span> <span class="o">=</span> <span class="n">vcat</span><span class="p">([</span><span class="mf">1.0</span><span class="p">],</span> <span class="n">zeros</span><span class="p">(</span><span class="n">number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>

<span class="k">type</span> <span class="n">Sawtooth</span> <span class="o">&lt;:</span> <span class="n">Wave</span> <span class="k">end</span>
<span class="n">harm</span><span class="p">(</span><span class="o">::</span><span class="n">Sawtooth</span><span class="p">,</span> <span class="n">number</span><span class="o">::</span><span class="kt">Int</span><span class="p">)</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">./</span> <span class="n">enumrange</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>

<span class="k">type</span> <span class="n">Triangle</span> <span class="o">&lt;:</span> <span class="n">Wave</span> <span class="k">end</span>
<span class="n">harm</span><span class="p">(</span><span class="o">::</span><span class="n">Triangle</span><span class="p">,</span> <span class="n">number</span><span class="o">::</span><span class="kt">Int</span><span class="p">)</span> <span class="o">=</span> <span class="p">[(((</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span><span class="o">%</span><span class="mi">4</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="n">number</span><span class="p">]</span> <span class="o">./</span> <span class="n">enumrange</span><span class="p">(</span><span class="n">number</span><span class="p">)</span><span class="o">.^</span><span class="mi">2</span>

<span class="k">type</span> <span class="n">Square</span> <span class="o">&lt;:</span> <span class="n">Wave</span> <span class="k">end</span>
<span class="n">harm</span><span class="p">(</span><span class="o">::</span><span class="n">Square</span><span class="p">,</span> <span class="n">number</span><span class="o">::</span><span class="kt">Int</span><span class="p">)</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="kp">in</span> <span class="mi">1</span><span class="o">:</span><span class="n">number</span><span class="p">]</span> <span class="o">./</span> <span class="n">enumrange</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>harm (generic function with 4 methods)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="nd">@show</span> <span class="n">harm</span><span class="p">(</span><span class="n">Sine</span><span class="p">(),</span> <span class="mi">9</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">harm</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="mi">9</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">harm</span><span class="p">(</span><span class="n">Square</span><span class="p">(),</span> <span class="mi">9</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">harm</span><span class="p">(</span><span class="n">Triangle</span><span class="p">(),</span> <span class="mi">9</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>harm(Sine(), 9) = [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
harm(Sawtooth(), 9) = [1.0, 0.5, 0.333333, 0.25, 0.2, 0.166667, 0.142857, 0.125, 0.111111]
harm(Square(), 9) = [1.0, 0.0, 0.333333, 0.0, 0.2, 0.0, 0.142857, 0.0, 0.111111]
harm(Triangle(), 9) = [1.0, 0.0, -0.111111, 0.0, 0.04, 0.0, -0.0204082, 0.0, 0.0123457]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's also quickly check how our approximated waveforms look:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">xx</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="nb">π</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">yy</span><span class="p">(</span><span class="n">wave</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="o">=</span> <span class="n">harm</span><span class="p">(</span><span class="n">wave</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span><span class="o">'</span> <span class="o">*</span> <span class="p">[</span><span class="n">sin</span><span class="o">.</span><span class="p">(</span><span class="n">f</span><span class="o">*</span><span class="n">xx</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="n">n</span><span class="p">]</span>

<span class="n">plot</span><span class="p">(</span><span class="n">xx</span><span class="p">,[</span><span class="n">yy</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="kp">in</span> <span class="p">[</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">Square</span><span class="p">(),</span> <span class="n">Triangle</span><span class="p">()]])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>



<div class="output_svg output_subarea output_execute_result">
<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewbox="0 0 600 400"><defs><clippath id="clip1000"><rect x="0" y="0" width="600" height="400"></rect></clippath></defs><polygon clip-path="url(#clip1000)" points="
0,400 600,400 600,0 0,0 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip1001"><rect x="120" y="0" width="421" height="400"></rect></clippath></defs><polygon clip-path="url(#clip1000)" points="
39.502,375.869 580.315,375.869 580.315,11.811 39.502,11.811 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip1002"><rect x="39" y="11" width="542" height="365"></rect></clippath></defs><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  39.502,375.869 39.502,11.811 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  125.575,375.869 125.575,11.811 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  211.648,375.869 211.648,11.811 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  297.721,375.869 297.721,11.811 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  383.794,375.869 383.794,11.811 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  469.867,375.869 469.867,11.811 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  555.94,375.869 555.94,11.811 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  39.502,350.976 580.315,350.976 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  39.502,298.597 580.315,298.597 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  39.502,246.219 580.315,246.219 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  39.502,193.84 580.315,193.84 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  39.502,141.461 580.315,141.461 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  39.502,89.0824 580.315,89.0824 
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  39.502,36.7036 580.315,36.7036 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,375.869 580.315,375.869 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,375.869 39.502,11.811 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,375.869 39.502,370.408 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  125.575,375.869 125.575,370.408 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  211.648,375.869 211.648,370.408 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  297.721,375.869 297.721,370.408 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  383.794,375.869 383.794,370.408 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  469.867,375.869 469.867,370.408 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  555.94,375.869 555.94,370.408 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,350.976 47.6142,350.976 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,298.597 47.6142,298.597 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,246.219 47.6142,246.219 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,193.84 47.6142,193.84 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,141.461 47.6142,141.461 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,89.0824 47.6142,89.0824 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,36.7036 47.6142,36.7036 
  "></polyline><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 39.502, 389.669)" x="39.502" y="389.669">0</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 125.575, 389.669)" x="125.575" y="389.669">2</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 211.648, 389.669)" x="211.648" y="389.669">4</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 297.721, 389.669)" x="297.721" y="389.669">6</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 383.794, 389.669)" x="383.794" y="389.669">8</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 469.867, 389.669)" x="469.867" y="389.669">10</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 555.94, 389.669)" x="555.94" y="389.669">12</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 33.502, 355.476)" x="33.502" y="355.476">-1.5</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 33.502, 303.097)" x="33.502" y="303.097">-1.0</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 33.502, 250.719)" x="33.502" y="250.719">-0.5</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 33.502, 198.34)" x="33.502" y="198.34">0.0</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 33.502, 145.961)" x="33.502" y="145.961">0.5</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 33.502, 93.5824)" x="33.502" y="93.5824">1.0</text></g><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 33.502, 41.2036)" x="33.502" y="41.2036">1.5</text></g><polyline clip-path="url(#clip1002)" style="stroke:#009af9; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,193.84 44.9648,11.811 50.4275,48.679 55.8903,51.4306 61.353,49.5821 66.8158,70.0958 72.2786,62.4265 77.7413,80.4101 83.2041,80.6639 88.6668,88.2787 
  94.1296,98.5927 99.5923,98.6557 105.055,112.681 110.518,113.183 115.981,123.282 121.443,129.807 126.906,133.525 132.369,145.126 137.832,146.278 143.294,157.446 
  148.757,161.731 154.22,168.034 159.683,177.55 165.145,179.667 170.608,191.226 176.071,193.955 181.534,202.439 186.996,209.863 192.459,213.307 197.922,224.739 
  203.385,226.333 208.847,236.877 214.31,241.963 219.773,247.253 225.236,257.994 230.699,258.781 236.161,271.515 241.624,273.619 247.087,281.734 252.55,290.87 
  258.012,291.179 263.475,306.82 268.938,304.006 274.401,317.761 279.863,322.631 285.326,323.161 290.789,345.54 296.252,326.117 301.714,369.932 307.177,314.633 
  312.64,73.0467 318.103,17.7478 323.565,61.5628 329.028,42.1402 334.491,64.5186 339.954,65.0484 345.416,69.9185 350.879,83.6736 356.342,80.8597 361.805,96.5007 
  367.267,96.8093 372.73,105.946 378.193,114.06 383.656,116.165 389.118,128.899 394.581,129.686 400.044,140.427 405.507,145.717 410.969,150.803 416.432,161.347 
  421.895,162.941 427.358,174.373 432.821,177.817 438.283,185.24 443.746,193.725 449.209,196.454 454.672,208.013 460.134,210.13 465.597,219.646 471.06,225.948 
  476.523,230.233 481.985,241.402 487.448,242.554 492.911,254.154 498.374,257.872 503.836,264.398 509.299,274.497 514.762,274.998 520.225,289.024 525.687,289.087 
  531.15,299.401 536.613,307.016 542.076,307.27 547.538,325.253 553.001,317.584 558.464,338.098 563.927,336.249 569.389,339.001 574.852,375.869 580.315,193.84 
  
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#e26f46; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,193.84 44.9648,100.157 50.4275,113.478 55.8903,113.961 61.353,107.311 66.8158,115.934 72.2786,108.305 77.7413,113.03 83.2041,111.997 88.6668,109.636 
  94.1296,114.221 99.5923,109.079 105.055,113.076 110.518,111.512 115.981,110.108 121.443,114.111 126.906,108.707 132.369,113.764 137.832,110.928 143.294,110.025 
  148.757,115.394 154.22,105.933 159.683,117.844 165.145,106.541 170.608,112.107 176.071,226.35 181.534,290.902 186.996,269.412 192.459,277.939 197.922,277.542 
  203.385,272.901 208.847,279.747 214.31,273.213 219.773,277.548 225.236,276.399 230.699,274.379 236.161,278.654 241.624,273.634 247.087,277.72 252.55,275.956 
  258.012,274.688 263.475,278.796 268.938,272.953 274.401,278.715 279.863,275.183 285.326,274.459 290.789,280.923 296.252,267.999 301.714,287.76 307.177,254.667 
  312.64,133.013 318.103,99.9201 323.565,119.68 329.028,106.757 334.491,113.221 339.954,112.496 345.416,108.964 350.879,114.726 356.342,108.883 361.805,112.992 
  367.267,111.724 372.73,109.96 378.193,114.045 383.656,109.026 389.118,113.301 394.581,111.281 400.044,110.132 405.507,114.467 410.969,107.933 416.432,114.779 
  421.895,110.138 427.358,109.741 432.821,118.268 438.283,96.7774 443.746,161.33 449.209,275.572 454.672,281.138 460.134,269.835 465.597,281.747 471.06,272.286 
  476.523,277.655 481.985,276.752 487.448,273.916 492.911,278.973 498.374,273.569 503.836,277.571 509.299,276.168 514.762,274.604 520.225,278.601 525.687,273.459 
  531.15,278.044 536.613,275.683 542.076,274.65 547.538,279.375 553.001,271.746 558.464,280.369 563.927,273.718 569.389,274.201 574.852,287.523 580.315,193.84 
  
  "></polyline><polyline clip-path="url(#clip1002)" style="stroke:#3da44d; stroke-width:1; stroke-opacity:1; fill:none" points="
  39.502,193.84 44.9648,183.469 50.4275,172.829 55.8903,162.646 61.353,151.961 66.8158,141.654 72.2786,131.245 77.7413,120.568 83.2041,110.532 88.6668,99.5853 
  94.1296,89.6109 99.5923,78.9094 105.055,68.3747 110.518,70.295 115.981,81.8852 121.443,91.9687 126.906,102.346 132.369,113.092 137.832,123.15 143.294,133.937 
  148.757,144.166 154.22,154.655 159.683,165.213 165.145,175.434 170.608,186.13 176.071,196.373 181.534,206.901 186.996,217.408 192.459,227.653 197.922,238.374 
  203.385,248.546 208.847,259.159 214.31,269.622 219.773,279.803 225.236,290.761 230.699,300.472 236.161,311.842 241.624,320.331 247.087,314.803 252.55,303.025 
  258.012,293.297 263.475,282.547 268.938,272.097 274.401,261.871 279.863,251.112 285.326,240.972 290.789,230.324 296.252,219.936 301.714,209.589 307.177,198.937 
  312.64,188.743 318.103,178.091 323.565,167.744 329.028,157.355 334.491,146.708 339.954,136.568 345.416,125.808 350.879,115.583 356.342,105.132 361.805,94.383 
  367.267,84.6551 372.73,72.8766 378.193,67.3487 383.656,75.838 389.118,87.2082 394.581,96.9182 400.044,107.876 405.507,118.058 410.969,128.521 416.432,139.133 
  421.895,149.305 427.358,160.026 432.821,170.272 438.283,180.779 443.746,191.306 449.209,201.55 454.672,212.245 460.134,222.467 465.597,233.024 471.06,243.514 
  476.523,253.743 481.985,264.53 487.448,274.588 492.911,285.334 498.374,295.711 503.836,305.795 509.299,317.385 514.762,319.305 520.225,308.77 525.687,298.069 
  531.15,288.094 536.613,277.148 542.076,267.112 547.538,256.435 553.001,246.026 558.464,235.719 563.927,225.034 569.389,214.851 574.852,204.211 580.315,193.84 
  
  "></polyline><polygon clip-path="url(#clip1000)" points="
489.608,93.171 562.315,93.171 562.315,32.691 489.608,32.691 
  " fill="#ffffff" fill-opacity="1"></polygon><polyline clip-path="url(#clip1000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  489.608,93.171 562.315,93.171 562.315,32.691 489.608,32.691 489.608,93.171 
  "></polyline><polyline clip-path="url(#clip1000)" style="stroke:#009af9; stroke-width:1; stroke-opacity:1; fill:none" points="
  495.608,47.811 531.608,47.811 
  "></polyline><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 537.608, 52.311)" x="537.608" y="52.311">y1</text></g><polyline clip-path="url(#clip1000)" style="stroke:#e26f46; stroke-width:1; stroke-opacity:1; fill:none" points="
  495.608,62.931 531.608,62.931 
  "></polyline><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 537.608, 67.431)" x="537.608" y="67.431">y2</text></g><polyline clip-path="url(#clip1000)" style="stroke:#3da44d; stroke-width:1; stroke-opacity:1; fill:none" points="
  495.608,78.051 531.608,78.051 
  "></polyline><g clip-path="url(#clip1000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 537.608, 82.551)" x="537.608" y="82.551">y3</text></g></svg>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># We add a new type to couple frequency and amplitute of a harmonic overtone</span>

<span class="n">struct</span> <span class="n">Tone</span>
    <span class="n">freq</span><span class="o">::</span><span class="kt">Float64</span>
    <span class="n">ampl</span><span class="o">::</span><span class="kt">Float64</span>
<span class="k">end</span>

<span class="n">diss</span><span class="p">(</span><span class="n">t1</span><span class="o">::</span><span class="n">Tone</span><span class="p">,</span> <span class="n">t2</span><span class="o">::</span><span class="n">Tone</span><span class="p">)</span> <span class="o">=</span> <span class="n">diss</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">freq</span><span class="p">,</span> <span class="n">t1</span><span class="o">.</span><span class="n">ampl</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">freq</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">ampl</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>diss (generic function with 2 methods)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># More functions to generate all overtones</span>

<span class="k">function</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">wave</span><span class="o">::</span><span class="n">Wave</span><span class="p">,</span> <span class="n">basefreq</span><span class="o">::</span><span class="kt">Float64</span><span class="p">,</span> <span class="n">number</span><span class="o">::</span><span class="kt">Int</span><span class="p">)</span>
    <span class="c"># frequencies with integer multiples</span>
    <span class="n">freqs</span> <span class="o">=</span> <span class="n">basefreq</span> <span class="o">.*</span> <span class="n">enumrange</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
    <span class="n">ampls</span> <span class="o">=</span> <span class="n">abs</span><span class="o">.</span><span class="p">(</span><span class="n">harm</span><span class="p">(</span><span class="n">wave</span><span class="p">,</span> <span class="n">number</span><span class="p">))</span>
    <span class="c"># keep tones with nonzero amplitude</span>
    <span class="p">[</span><span class="n">Tone</span><span class="p">(</span><span class="n">tup</span><span class="o">...</span><span class="p">)</span> <span class="k">for</span> <span class="n">tup</span> <span class="kp">in</span> <span class="n">zip</span><span class="p">(</span><span class="n">freqs</span><span class="p">,</span> <span class="n">ampls</span><span class="p">)</span> <span class="k">if</span> <span class="n">tup</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">]</span>
<span class="k">end</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>harmonics (generic function with 1 method)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="nd">@show</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">Sine</span><span class="p">(),</span> <span class="mf">440.0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">Triangle</span><span class="p">(),</span> <span class="mf">440.0</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>harmonics(Sine(), 440.0, 4) = Tone[Tone(440.0, 1.0)]
harmonics(Triangle(), 440.0, 4) = Tone[Tone(440.0, 1.0), Tone(1320.0, 0.111111)]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="k">function</span> <span class="n">diss</span><span class="p">(</span><span class="n">tones</span><span class="o">::</span><span class="kt">AbstractArray</span><span class="p">{</span><span class="n">Tone</span><span class="p">})</span>
    <span class="n">res</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="c"># iterate over all pairs</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">tones</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="n">n</span>
        <span class="k">for</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">:</span><span class="n">n</span>
            <span class="n">res</span> <span class="o">+=</span> <span class="n">diss</span><span class="p">(</span><span class="n">tones</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">tones</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
        <span class="k">end</span>
    <span class="k">end</span>
    <span class="n">res</span>
<span class="k">end</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>diss (generic function with 3 methods)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="k">function</span> <span class="n">together</span><span class="p">(</span><span class="n">tones1</span><span class="o">::</span><span class="kt">AbstractArray</span><span class="p">{</span><span class="n">Tone</span><span class="p">},</span> <span class="n">tones2</span><span class="o">::</span><span class="kt">AbstractArray</span><span class="p">{</span><span class="n">Tone</span><span class="p">})</span>
    <span class="c"># TODO: should do proper merge and match those tones with same frequency?</span>
    <span class="n">vcat</span><span class="p">(</span><span class="n">tones1</span><span class="p">,</span> <span class="n">tones2</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="n">diss</span><span class="p">(</span><span class="n">tones1</span><span class="o">::</span><span class="kt">AbstractArray</span><span class="p">{</span><span class="n">Tone</span><span class="p">},</span> <span class="n">tones2</span><span class="o">::</span><span class="kt">AbstractArray</span><span class="p">{</span><span class="n">Tone</span><span class="p">})</span>
    <span class="n">diss</span><span class="p">(</span><span class="n">together</span><span class="p">(</span><span class="n">tones1</span><span class="p">,</span> <span class="n">tones2</span><span class="p">))</span>
<span class="k">end</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>diss (generic function with 4 methods)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As a first example, we look at the square waveform approximated with 10 harmonices and draw the dissonance curve for two pitches played simultaneously.</p>
<p>Note the local maxima near frequency rations 1 and 2 and the minima at integer (or "simple") ratios.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">numharm</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">basetone</span> <span class="o">=</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">Square</span><span class="p">(),</span> <span class="n">basefreq</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span>
<span class="n">othertones</span> <span class="o">=</span> <span class="p">[</span><span class="n">harmonics</span><span class="p">(</span><span class="n">Square</span><span class="p">(),</span> <span class="n">of</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span> <span class="k">for</span> <span class="n">of</span> <span class="kp">in</span> <span class="n">otherfreq</span><span class="p">]</span>
<span class="n">disss</span> <span class="o">=</span> <span class="p">[</span><span class="n">diss</span><span class="p">(</span><span class="n">basetone</span><span class="p">,</span> <span class="n">ot</span><span class="p">)</span> <span class="k">for</span> <span class="n">ot</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">]</span>

<span class="n">plot</span><span class="p">(</span><span class="n">ratrange</span><span class="p">,</span> <span class="n">disss</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s">"Freq ratio"</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s">"Dissonance"</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">"Square </span><span class="si">$basefreq</span><span class="s">"</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[13]:</div>



<div class="output_svg output_subarea output_execute_result">
<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewbox="0 0 600 400"><defs><clippath id="clip1200"><rect x="0" y="0" width="600" height="400"></rect></clippath></defs><polygon clip-path="url(#clip1200)" points="
0,400 600,400 600,0 0,0 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip1201"><rect x="120" y="0" width="421" height="400"></rect></clippath></defs><polygon clip-path="url(#clip1200)" points="
48.2225,360.121 580.315,360.121 580.315,31.4961 48.2225,31.4961 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip1202"><rect x="48" y="31" width="533" height="330"></rect></clippath></defs><polyline clip-path="url(#clip1202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,360.121 48.2225,31.4961 
  "></polyline><polyline clip-path="url(#clip1202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  181.246,360.121 181.246,31.4961 
  "></polyline><polyline clip-path="url(#clip1202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  314.269,360.121 314.269,31.4961 
  "></polyline><polyline clip-path="url(#clip1202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  447.292,360.121 447.292,31.4961 
  "></polyline><polyline clip-path="url(#clip1202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  580.315,360.121 580.315,31.4961 
  "></polyline><polyline clip-path="url(#clip1202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,296.184 580.315,296.184 
  "></polyline><polyline clip-path="url(#clip1202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,232.234 580.315,232.234 
  "></polyline><polyline clip-path="url(#clip1202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,168.284 580.315,168.284 
  "></polyline><polyline clip-path="url(#clip1202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,104.333 580.315,104.333 
  "></polyline><polyline clip-path="url(#clip1202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  48.2225,40.383 580.315,40.383 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,360.121 580.315,360.121 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,360.121 48.2225,31.4961 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,360.121 48.2225,355.191 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  181.246,360.121 181.246,355.191 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  314.269,360.121 314.269,355.191 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  447.292,360.121 447.292,355.191 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  580.315,360.121 580.315,355.191 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,296.184 56.2039,296.184 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,232.234 56.2039,232.234 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,168.284 56.2039,168.284 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,104.333 56.2039,104.333 
  "></polyline><polyline clip-path="url(#clip1200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,40.383 56.2039,40.383 
  "></polyline><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 48.2225, 373.921)" x="48.2225" y="373.921">1.0</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 181.246, 373.921)" x="181.246" y="373.921">1.5</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 314.269, 373.921)" x="314.269" y="373.921">2.0</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 447.292, 373.921)" x="447.292" y="373.921">2.5</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 580.315, 373.921)" x="580.315" y="373.921">3.0</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 42.2225, 300.684)" x="42.2225" y="300.684">0.2</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 42.2225, 236.734)" x="42.2225" y="236.734">0.4</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 42.2225, 172.784)" x="42.2225" y="172.784">0.6</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 42.2225, 108.833)" x="42.2225" y="108.833">0.8</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 42.2225, 44.883)" x="42.2225" y="44.883">1.0</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:21; text-anchor:middle;" transform="rotate(0, 314.269, 18)" x="314.269" y="18">Square 440.0</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:16; text-anchor:middle;" transform="rotate(0, 314.269, 397.6)" x="314.269" y="397.6">Freq ratio</text></g><g clip-path="url(#clip1200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:16; text-anchor:middle;" transform="rotate(-90, 14.4, 195.808)" x="14.4" y="195.808">Dissonance</text></g><polyline clip-path="url(#clip1202)" style="stroke:#009af9; stroke-width:1; stroke-opacity:1; fill:none" points="
  48.2225,360.12 50.8964,211.387 53.5702,119.671 56.244,66.7476 58.9179,40.2022 61.5917,31.4961 64.2655,34.7069 66.9393,45.6999 69.6132,61.5761 72.287,80.3002 
  74.9608,100.446 77.6347,121.023 80.3085,141.348 82.9823,160.964 85.6562,179.573 88.33,196.994 91.0038,213.125 93.6777,227.924 96.3515,241.391 99.0253,253.551 
  101.699,264.452 104.373,274.158 107.047,282.751 109.721,290.335 112.394,297.05 115.068,303.09 117.742,308.743 120.416,314.435 123.09,320.817 125.764,324.015 
  128.437,325.161 131.111,327.016 133.785,329.075 136.459,331.072 139.133,332.906 141.807,334.606 144.48,336.325 147.154,338.349 149.828,341.141 152.502,345.403 
  155.176,349.543 157.85,346.273 160.523,345.078 163.197,345.084 165.871,345.728 168.545,346.649 171.219,347.623 173.893,348.512 176.566,349.233 179.24,349.741 
  181.914,350.01 184.588,350.028 187.262,349.79 189.936,349.299 192.609,348.562 195.283,347.592 197.957,346.415 200.631,345.069 203.305,343.614 205.979,342.142 
  208.652,340.789 211.326,339.752 214,339.315 216.674,339.872 219.348,341.975 222.022,346.377 224.695,354.105 227.369,350.671 230.043,343.586 232.717,339.424 
  235.391,337.244 238.065,336.379 240.738,336.368 243.412,336.91 246.086,337.828 248.76,339.05 251.434,340.601 254.108,342.599 256.781,345.265 259.455,348.944 
  262.129,350.77 264.803,349.165 267.477,348.645 270.151,348.817 272.824,349.408 275.498,350.231 278.172,351.161 280.846,352.115 283.52,353.042 286.194,353.91 
  288.867,354.703 291.541,355.413 294.215,356.039 296.889,356.583 299.563,357.049 302.237,357.444 304.91,357.772 307.584,358.04 310.258,358.253 312.932,358.416 
  315.606,358.531 318.279,358.603 320.953,358.633 323.627,358.624 326.301,358.575 328.975,358.488 331.649,358.36 334.322,358.192 336.996,357.98 339.67,357.724 
  342.344,357.419 345.018,357.063 347.692,356.652 350.365,356.184 353.039,355.654 355.713,355.061 358.387,354.402 361.061,353.677 363.735,352.888 366.408,352.04 
  369.082,351.14 371.756,350.204 374.43,349.252 377.104,348.315 379.778,347.435 382.451,346.671 385.125,346.099 387.799,345.823 390.473,345.976 393.147,346.734 
  395.821,348.318 398.494,351.013 401.168,355.182 403.842,356.897 406.516,351.925 409.19,348.565 411.864,346.408 414.537,345.139 417.211,344.512 419.885,344.338 
  422.559,344.473 425.233,344.806 427.907,345.254 430.58,345.755 433.254,346.261 435.928,346.737 438.602,347.158 441.276,347.506 443.95,347.768 446.623,347.933 
  449.297,347.996 451.971,347.95 454.645,347.794 457.319,347.524 459.993,347.137 462.666,346.631 465.34,346.004 468.014,345.253 470.688,344.376 473.362,343.369 
  476.036,342.228 478.709,340.949 481.383,339.529 484.057,337.961 486.731,336.242 489.405,334.367 492.079,332.329 494.752,330.125 497.426,327.748 500.1,325.197 
  502.774,322.465 505.448,319.552 508.122,316.456 510.795,313.178 513.469,309.72 516.143,306.089 518.817,302.292 521.491,298.344 524.165,294.262 526.838,290.071 
  529.512,285.801 532.186,281.492 534.86,277.195 537.534,272.97 540.207,268.893 542.881,265.056 545.555,261.569 548.229,258.565 550.903,256.203 553.577,254.672 
  556.25,254.195 558.924,255.037 561.598,257.506 564.272,261.968 566.946,268.849 569.62,278.647 572.293,291.942 574.967,309.409 577.641,331.833 580.315,360.121 
  
  "></polyline></svg>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, we repeat the experiment, now based on an approximation of the sawtooth waveform.
Because of the richer harmonices, there is more interaction and more dissonance (in absolute terms).</p>
<p>As a consequence, the dissonance curve shows more local minima, again corresponding to "simple" frequency ratios, that is, ratios of small integers.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">numharm</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">basetone</span> <span class="o">=</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">basefreq</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span>
<span class="n">othertones</span> <span class="o">=</span> <span class="p">[</span><span class="n">harmonics</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">of</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span> <span class="k">for</span> <span class="n">of</span> <span class="kp">in</span> <span class="n">otherfreq</span><span class="p">]</span>
<span class="n">disss</span> <span class="o">=</span> <span class="p">[</span><span class="n">diss</span><span class="p">(</span><span class="n">basetone</span><span class="p">,</span> <span class="n">ot</span><span class="p">)</span> <span class="k">for</span> <span class="n">ot</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">]</span>

<span class="n">plot</span><span class="p">(</span><span class="n">ratrange</span><span class="p">,</span> <span class="n">disss</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s">"Freq ratio"</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s">"Dissonance"</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">"Sawtooth </span><span class="si">$basefreq</span><span class="s">"</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[14]:</div>



<div class="output_svg output_subarea output_execute_result">
<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewbox="0 0 600 400"><defs><clippath id="clip1400"><rect x="0" y="0" width="600" height="400"></rect></clippath></defs><polygon clip-path="url(#clip1400)" points="
0,400 600,400 600,0 0,0 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip1401"><rect x="120" y="0" width="421" height="400"></rect></clippath></defs><polygon clip-path="url(#clip1400)" points="
54.9131,360.121 580.315,360.121 580.315,31.4961 54.9131,31.4961 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip1402"><rect x="54" y="31" width="526" height="330"></rect></clippath></defs><polyline clip-path="url(#clip1402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  54.9131,360.121 54.9131,31.4961 
  "></polyline><polyline clip-path="url(#clip1402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  186.264,360.121 186.264,31.4961 
  "></polyline><polyline clip-path="url(#clip1402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  317.614,360.121 317.614,31.4961 
  "></polyline><polyline clip-path="url(#clip1402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  448.964,360.121 448.964,31.4961 
  "></polyline><polyline clip-path="url(#clip1402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  580.315,360.121 580.315,31.4961 
  "></polyline><polyline clip-path="url(#clip1402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  54.9131,303.587 580.315,303.587 
  "></polyline><polyline clip-path="url(#clip1402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  54.9131,242.36 580.315,242.36 
  "></polyline><polyline clip-path="url(#clip1402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  54.9131,181.133 580.315,181.133 
  "></polyline><polyline clip-path="url(#clip1402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  54.9131,119.906 580.315,119.906 
  "></polyline><polyline clip-path="url(#clip1402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  54.9131,58.679 580.315,58.679 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  54.9131,360.121 580.315,360.121 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  54.9131,360.121 54.9131,31.4961 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  54.9131,360.121 54.9131,355.191 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  186.264,360.121 186.264,355.191 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  317.614,360.121 317.614,355.191 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  448.964,360.121 448.964,355.191 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  580.315,360.121 580.315,355.191 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  54.9131,303.587 62.7941,303.587 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  54.9131,242.36 62.7941,242.36 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  54.9131,181.133 62.7941,181.133 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  54.9131,119.906 62.7941,119.906 
  "></polyline><polyline clip-path="url(#clip1400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  54.9131,58.679 62.7941,58.679 
  "></polyline><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 54.9131, 373.921)" x="54.9131" y="373.921">1.0</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 186.264, 373.921)" x="186.264" y="373.921">1.5</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 317.614, 373.921)" x="317.614" y="373.921">2.0</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 448.964, 373.921)" x="448.964" y="373.921">2.5</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 580.315, 373.921)" x="580.315" y="373.921">3.0</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 48.9131, 308.087)" x="48.9131" y="308.087">0.25</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 48.9131, 246.86)" x="48.9131" y="246.86">0.50</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 48.9131, 185.633)" x="48.9131" y="185.633">0.75</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 48.9131, 124.406)" x="48.9131" y="124.406">1.00</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 48.9131, 63.179)" x="48.9131" y="63.179">1.25</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:21; text-anchor:middle;" transform="rotate(0, 317.614, 18)" x="317.614" y="18">Sawtooth 440.0</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:16; text-anchor:middle;" transform="rotate(0, 317.614, 397.6)" x="317.614" y="397.6">Freq ratio</text></g><g clip-path="url(#clip1400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:16; text-anchor:middle;" transform="rotate(-90, 14.4, 195.808)" x="14.4" y="195.808">Dissonance</text></g><polyline clip-path="url(#clip1402)" style="stroke:#009af9; stroke-width:1; stroke-opacity:1; fill:none" points="
  54.9131,359.771 57.5533,197.736 60.1935,104.329 62.8337,55.2142 65.474,34.4393 68.1142,31.4961 70.7544,39.4474 73.3946,53.7357 76.0348,71.4358 78.675,90.8089 
  81.3152,111.08 83.9554,132.4 86.5956,150.663 89.2358,167.481 91.8761,184.047 94.5163,197.101 97.1565,210.847 99.7967,222.934 102.437,231.691 105.077,242.34 
  107.717,253.992 110.358,256.804 112.998,261.746 115.638,268.48 118.278,277.662 120.918,288.082 123.559,283.668 126.199,283.259 128.839,285.776 131.479,287.524 
  134.119,289.31 136.76,293.797 139.4,301.787 142.04,315.036 144.68,307.229 147.32,299.721 149.961,295.876 152.601,294.304 155.241,294.344 157.881,295.95 
  160.522,297.659 163.162,293.933 165.802,292.373 168.442,291.079 171.082,288.615 173.723,288.228 176.363,290.276 179.003,295.687 181.643,306.019 184.283,323.575 
  186.924,336.204 189.564,314.641 192.204,301.739 194.844,294.622 197.484,291.282 200.125,290.352 202.765,290.953 205.405,292.591 208.045,295.097 210.686,298.608 
  213.326,301.193 215.966,299.933 218.606,300.022 221.246,301.359 223.887,304.181 226.527,309.064 229.167,316.965 231.807,313.569 234.447,306.287 237.088,301.589 
  239.728,298.586 242.368,296.739 245.008,295.794 247.648,295.746 250.289,296.83 252.929,295.754 255.569,290.135 258.209,285.753 260.85,282.299 263.49,279.704 
  266.13,275.541 268.77,268.453 271.41,261.811 274.051,255.277 276.691,248.652 279.331,241.845 281.971,234.857 284.611,227.775 287.252,220.769 289.892,214.096 
  292.532,208.116 295.172,203.303 297.812,200.277 300.453,199.828 303.093,202.963 305.733,210.95 308.373,225.385 311.014,248.264 313.654,282.082 316.294,329.942 
  318.934,330.053 321.574,282.552 324.215,249.111 326.855,226.513 329.495,212.22 332.135,204.23 334.775,200.97 337.416,201.205 340.056,203.966 342.696,208.498 
  345.336,214.216 347.976,220.666 350.617,227.504 353.257,234.468 355.897,241.369 358.537,248.07 361.178,254.484 363.818,260.563 366.458,266.298 369.098,271.711 
  371.738,276.865 374.379,281.857 377.019,286.831 379.659,291.98 382.299,297.564 384.939,299.885 387.58,300.567 390.22,301.839 392.86,303.606 395.5,305.858 
  398.14,308.663 400.781,312.166 403.421,316.596 406.061,318.917 408.701,315.875 411.342,313.828 413.982,312.48 416.622,311.617 419.262,311.096 421.902,310.831 
  424.543,310.79 427.183,310.989 429.823,311.494 432.463,312.418 435.103,313.929 437.744,316.254 440.384,319.688 443.024,324.608 445.664,331.485 448.304,340.905 
  450.945,335.978 453.585,328.129 456.225,322.523 458.865,318.622 461.505,316.004 464.146,314.339 466.786,313.377 469.426,312.93 472.066,312.863 474.707,313.092 
  477.347,313.572 479.987,314.296 482.627,315.297 485.267,316.644 487.908,318.445 490.548,320.854 493.188,322.75 495.828,318.963 498.468,315.884 501.109,313.289 
  503.749,311 506.389,308.879 509.029,306.817 511.669,304.732 514.31,302.561 516.95,300.261 519.59,297.8 522.23,295.163 524.871,292.345 527.511,289.352 
  530.151,286.2 532.791,282.921 535.431,279.553 538.072,276.152 540.712,272.787 543.352,269.544 545.992,266.529 548.632,263.87 551.273,261.724 553.913,260.275 
  556.553,259.745 559.193,260.398 561.833,262.546 564.474,266.556 567.114,272.864 569.754,281.979 572.394,294.501 575.035,311.129 577.675,332.684 580.315,360.121 
  
  "></polyline></svg>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Triads">Triads<a class="anchor-link" href="#Triads">¶</a>
</h3>
<p>We will now compute the dissonaces for triads of tones in an analoguous fashion.
But this time, we will only evaluate a discrete set of pitches, based on a 12-tone scale, dividing the octave in equal steps.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># dissonance for triads</span>
<span class="k">function</span> <span class="n">diss</span><span class="p">(</span><span class="n">tones1</span><span class="o">::</span><span class="kt">AbstractArray</span><span class="p">{</span><span class="n">Tone</span><span class="p">},</span> <span class="n">tones2</span><span class="o">::</span><span class="kt">AbstractArray</span><span class="p">{</span><span class="n">Tone</span><span class="p">},</span> <span class="n">tones3</span><span class="o">::</span><span class="kt">AbstractArray</span><span class="p">{</span><span class="n">Tone</span><span class="p">})</span>
    <span class="n">diss</span><span class="p">(</span><span class="n">together</span><span class="p">(</span><span class="n">together</span><span class="p">(</span><span class="n">tones1</span><span class="p">,</span> <span class="n">tones2</span><span class="p">),</span> <span class="n">tones3</span><span class="p">))</span>
<span class="k">end</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>diss (generic function with 5 methods)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># range of one octave</span>
<span class="n">halfstep</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">^</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">12.0</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">halfstep</span>
<span class="n">ratrange</span> <span class="o">=</span> <span class="p">[</span><span class="n">halfstep</span><span class="o">^</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">:</span><span class="mi">12</span><span class="p">]</span>

<span class="n">basefreq</span> <span class="o">=</span> <span class="mf">440.0</span>
<span class="n">otherfreq</span> <span class="o">=</span> <span class="n">basefreq</span> <span class="o">*</span> <span class="n">ratrange</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>halfstep = 1.0594630943592953
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We start using the square waveform. In the heatmap below, we can see that dissonance is high whenever a single halfstep is present in the triad. This is true for the horizontal and vertical lines that are off by one from the origin, as well as the two diagonals off by one from the center. To a lesser extent, this pattern repeats for 11 halfsteps (one octave up, one halfstep down).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># start with square wave again</span>
<span class="n">numharm</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">basetone</span> <span class="o">=</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">Square</span><span class="p">(),</span> <span class="n">basefreq</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span>
<span class="n">othertones</span> <span class="o">=</span> <span class="p">[</span><span class="n">harmonics</span><span class="p">(</span><span class="n">Square</span><span class="p">(),</span> <span class="n">of</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span> <span class="k">for</span> <span class="n">of</span> <span class="kp">in</span> <span class="n">otherfreq</span><span class="p">]</span>

<span class="c"># compute dissonances of all triads</span>
<span class="n">disss</span> <span class="o">=</span> <span class="p">[</span><span class="n">diss</span><span class="p">(</span><span class="n">basetone</span><span class="p">,</span> <span class="n">ot1</span><span class="p">,</span> <span class="n">ot2</span><span class="p">)</span> <span class="k">for</span> <span class="n">ot1</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">,</span> <span class="n">ot2</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">]</span>

<span class="n">heatmap</span><span class="p">(</span><span class="mi">0</span><span class="o">:</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="o">:</span><span class="mi">12</span><span class="p">,</span> <span class="n">disss</span><span class="p">,</span> <span class="n">aspect_ratio</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">"Square wave on 12-tone octave"</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[17]:</div>



<div class="output_svg output_subarea output_execute_result">
<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewbox="0 0 600 400"><defs><clippath id="clip1600"><rect x="0" y="0" width="600" height="400"></rect></clippath></defs><polygon clip-path="url(#clip1600)" points="
0,400 600,400 600,0 0,0 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip1601"><rect x="120" y="0" width="421" height="400"></rect></clippath></defs><polygon clip-path="url(#clip1600)" points="
102.536,375.869 446.908,375.869 446.908,31.4961 102.536,31.4961 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip1602"><rect x="102" y="31" width="345" height="345"></rect></clippath></defs><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  115.781,375.869 115.781,31.4961 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  168.761,375.869 168.761,31.4961 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  221.742,375.869 221.742,31.4961 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  274.722,375.869 274.722,31.4961 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  327.702,375.869 327.702,31.4961 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  380.683,375.869 380.683,31.4961 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  433.663,375.869 433.663,31.4961 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,362.624 446.908,362.624 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,309.643 446.908,309.643 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,256.663 446.908,256.663 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,203.682 446.908,203.682 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,150.702 446.908,150.702 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,97.7216 446.908,97.7216 
  "></polyline><polyline clip-path="url(#clip1602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,44.7412 446.908,44.7412 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 446.908,375.869 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 102.536,31.4961 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  115.781,375.869 115.781,370.703 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  168.761,375.869 168.761,370.703 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  221.742,375.869 221.742,370.703 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  274.722,375.869 274.722,370.703 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  327.702,375.869 327.702,370.703 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  380.683,375.869 380.683,370.703 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  433.663,375.869 433.663,370.703 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,362.624 107.701,362.624 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,309.643 107.701,309.643 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,256.663 107.701,256.663 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,203.682 107.701,203.682 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,150.702 107.701,150.702 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,97.7216 107.701,97.7216 
  "></polyline><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,44.7412 107.701,44.7412 
  "></polyline><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 115.781, 389.669)" x="115.781" y="389.669">0</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 168.761, 389.669)" x="168.761" y="389.669">2</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 221.742, 389.669)" x="221.742" y="389.669">4</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 274.722, 389.669)" x="274.722" y="389.669">6</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 327.702, 389.669)" x="327.702" y="389.669">8</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 380.683, 389.669)" x="380.683" y="389.669">10</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 433.663, 389.669)" x="433.663" y="389.669">12</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 367.124)" x="96.5358" y="367.124">0</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 314.143)" x="96.5358" y="314.143">2</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 261.163)" x="96.5358" y="261.163">4</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 208.182)" x="96.5358" y="208.182">6</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 155.202)" x="96.5358" y="155.202">8</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 102.222)" x="96.5358" y="102.222">10</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 49.2412)" x="96.5358" y="49.2412">12</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:21; text-anchor:middle;" transform="rotate(0, 274.722, 18)" x="274.722" y="18">Square wave on 12-tone octave</text></g><g clip-path="url(#clip1602)"><image width="344" height="344" xlink:href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAVgAAAFYCAYAAAAWbORAAAAIiklEQVR4nO3WzavlBR3H8c/vnHPn
Xh0HcaYmmRLNTMUWIYFJtGhRi56gqI2bigqidlEhFLQICoR0WRRU0qYgxAIXkRG0kyIsqPChfFj4
UDFKWDp35t5zWvQv9Pm28PX6Bz73d3/nvM93WbK3y5C7b/j0yM7vX9gb2UmS3x4+O7Lz/PbxkZ0k
+ffRP0Z2ttsLIzv/tYysrFcHIztJcrC5amTnxuVtIztJ8r7XnhrZ+drT3xnZWY2sALwKCSxAicAC
lAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKU
CCxAicAClAgsQInAApQILECJwAKUCCxAyWZZnRgb219tR3ZWy8hMkmSd9cjOLjP/uyRZL3szQ6vd
zE6SZeg9XbH3upGdJLk5t47sfPDquUZ8+akfjOx89drPjOy4YAFKBBagRGABSgQWoERgAUoEFqBE
YAFKBBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQWoERg
AUoEFqBEYAFKNuvV5XNjq+3QzshMkmTJMrKzWfZHdpJkuzo5srPO3DNdvj49svPW3a0jO0ny3nMz
O3c+9ZOZoSTfuO7jIzv3Pf/SyI4LFqBEYAFKBBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQW
oERgAUoEFqBEYAFKBBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQWoERgAUoEFqBEYAFKNpNj
y9DO8W5oKMmym3mq9XJiZCdJNqvtyM7B6tTITpK8ZXvLyM4HXj/34fvik/eN7Nx13UdHdpLkvmcv
juw8tvvdyI4LFqBEYAFKBBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQWoERgAUoEFqBEYAFK
BBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQWoERgAUoEFqBksww29ni3jOxM/mqcyImRnf3l
5MhOkpxaXjOyc3OuGdlJknefOx7Z+dKT94/sJMk33/iRkZ0HnhmZSZI8kodHdi4cvTiy44IFKBFY
gBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUoEViA
EoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFYgJLN8fbC2Nh2N7OzWmZ2kmQv65Gd09uzIztJcsPe
6ZGdd569NLKTJF/4649Gdu6+/o6RnSR54JmZD/oflodHdpLkXxf/NrIz1T0XLECJwAKUCCxAicAC
lAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKU
CCxAicAClAgsQInAApQILEDJZln2xsYO1tuRnZObkZkkybnNyZGdq/avGNlJktvOvDKy87nH7x/Z
SZK733THyM4vn1uP7CTJn1Z/HNl5+eiFkZ0k2eV4bGmCCxagRGABSgQWoERgAUoEFqBEYAFKBBag
RGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQWoERgAUoEFqBE
YAFKBBagRGABSjYHe2fGxq7cPxzZufbkZmQnSc5dNvMbdf2pl0Z2kuQTj/5mZOdbb/7wyE6S/OK5
vZGdR/L0yE6SXNjOfCZWmfs+rZcTM0OrZWZmZAXgVUhgAUoEFqBEYAFKBBagRGABSgQWoERgAUoE
FqBEYAFKBBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQW
oGRzZnPt2Nj1Z/4+svOGKzcjO0myv3dpZOdDD43MJEnuvem2kZ2fP3vZyE6S/OXS+ZGdi6tXRnaS
ZG85GNlZrebusNWyHtlZhm5LFyxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJ
wAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClGxu39w0
NnbLe+4d2VnW25GdJPnY1z85svPT2x8d2UmSB584NbLz4uFuZCdJLsv+yM7Z7bmRnSS5mIsjO7tl
7j1NbR3neGTHBQtQIrAAJQILUCKwACUCC1AisAAlAgtQIrAAJQILUCKwACUCC1AisAAlAgtQIrAA
JQILUCKwACUCC1AisAAlAgtQIrAAJQILUCKwACUCC1AisAAlAgtQsvnUjc/Pjd357ZGdX739ZyM7
SfLDr3x/ZOfhB941spMke6vtyM41JzcjO0ly+uiKkZ3tbmTmv1tDO+tlaCjJ0dBDTb0nFyxAicAC
lAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKU
CCxAicAClAgsQInAApQILECJwAKUCCxAicAClCyH91y++3//Ef9r689/d2zr6K7Pjuz8+cF3jOwk
yRPnz47s/PNwf2QnSS4cz9wSq2VkJkmyXma+upOBONrOvKfDoR0XLECJwAKUCCxAicAClAgsQInA
ApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAC
lAgsQInAApQILEDJkmx2U2OH95wY2fn1j98/spMk33vs6pGdh44eHdlJkvNHT4/sXLh0fmQnSXa7
SyM769XByE6S7LId25pyvH15ZGe3vTiy44IFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgR
WIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKPkP
rpTMeGKhwm8AAAAASUVORK5CYII=
" transform="translate(103, 31)"></image></g><defs><clippath id="clip1603"><rect x="458" y="31" width="19" height="345"></rect></clippath></defs><g clip-path="url(#clip1603)"><image width="18" height="344" xlink:href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAABIAAAFYCAYAAABeeqzpAAACFklEQVR4nO3cwbHcMAwEUcjF/KNw
lv4mHYIu79BmiQFMaRrACKta6fnZv8+A80uIzMysfX6M0EFCztrZMWtFRsxaDXaQ0ShGSsgxmo/R
21mz/yChGmzJCFl7zl8jNNsIOUYPuiJmbQ2CfTMjdUVy1pi1bYR6s5Yr/xoE++JZS5afjUit/O4u
ci+jXEIGGeXKv2aThzX0Z9bH6OV8ffR+pDWi44Tk40MkdDEjZ81MyKyzHyJUZISsrXN6jJA1JSSf
HsesrdnG3c2MgjFyjBazVmSEOrvXkHKt+Ri9nCCj3qwdlUcXZzYsf6wh5azFtloGO9lHMdgXZ3ax
/LU+kv9ji5U/yCjYR/fO2v4Y/X9CQUZfH70L5cJf3tdi5WdXFOyjmxlNzFpy1pBQ0Zoqv+qjixm5
GCEyyah1sFFDBvvI5VGOUW5EinmkhHJDK9caJATzyJxgHuVgF1c/t2cTHZpHbD8iOsU+giNihK4u
v9FJRu29jKC1a6M2FyNJRrHyJ1e/mtDNjIyOS8ggo1ywyTwyl9SD/fXR+0nuR7XXznLWkutxzFpx
RHJRG5w1NyIxIXk7QtZysOVjn5i1ddAblUVGD3ovewcZIWuq/Gs/vVmLlT85a+gLKJBR7bNFuT6S
a81X/pcDE1J9bqYXI6dmLdhHufKzqgXzKNeQyVmLwQ5m9lEfvu310aif63NvHjlrSkh9sy44awr2
P2ju578jfRXaAAAAAElFTkSuQmCC
" transform="translate(459, 31)"></image></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 315.72)" x="485.908" y="315.72">0.5</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 252.145)" x="485.908" y="252.145">1.0</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 188.57)" x="485.908" y="188.57">1.5</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 124.995)" x="485.908" y="124.995">2.0</text></g><g clip-path="url(#clip1600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 61.4201)" x="485.908" y="61.4201">2.5</text></g><polyline clip-path="url(#clip1600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  476.908,375.869 476.908,312.307 482.908,312.307 476.908,312.307 476.908,248.732 482.908,248.732 476.908,248.732 476.908,185.157 482.908,185.157 476.908,185.157 
  476.908,121.582 482.908,121.582 476.908,121.582 476.908,58.0073 482.908,58.0073 476.908,58.0073 476.908,31.4961 
  "></polyline></svg>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we use the sawtooth wave instead, we see a richer structure in the dissonance heatmap.
Here, we should also be able to recognize familiar concepts such as the major or minor triads.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># now use richer sawtooth wave</span>
<span class="n">numharm</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">basetone</span> <span class="o">=</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">basefreq</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span>
<span class="n">othertones</span> <span class="o">=</span> <span class="p">[</span><span class="n">harmonics</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">of</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span> <span class="k">for</span> <span class="n">of</span> <span class="kp">in</span> <span class="n">otherfreq</span><span class="p">]</span>

<span class="c"># compute dissonances of all triads</span>
<span class="n">disss</span> <span class="o">=</span> <span class="p">[</span><span class="n">diss</span><span class="p">(</span><span class="n">basetone</span><span class="p">,</span> <span class="n">ot1</span><span class="p">,</span> <span class="n">ot2</span><span class="p">)</span> <span class="k">for</span> <span class="n">ot1</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">,</span> <span class="n">ot2</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">]</span>

<span class="n">heatmap</span><span class="p">(</span><span class="mi">0</span><span class="o">:</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="o">:</span><span class="mi">12</span><span class="p">,</span> <span class="n">disss</span><span class="p">,</span> <span class="n">aspect_ratio</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">"Sawtooth wave on 12-tone octave"</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[18]:</div>



<div class="output_svg output_subarea output_execute_result">
<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewbox="0 0 600 400"><defs><clippath id="clip1800"><rect x="0" y="0" width="600" height="400"></rect></clippath></defs><polygon clip-path="url(#clip1800)" points="
0,400 600,400 600,0 0,0 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip1801"><rect x="120" y="0" width="421" height="400"></rect></clippath></defs><polygon clip-path="url(#clip1800)" points="
102.536,375.869 446.908,375.869 446.908,31.4961 102.536,31.4961 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip1802"><rect x="102" y="31" width="345" height="345"></rect></clippath></defs><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  115.781,375.869 115.781,31.4961 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  168.761,375.869 168.761,31.4961 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  221.742,375.869 221.742,31.4961 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  274.722,375.869 274.722,31.4961 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  327.702,375.869 327.702,31.4961 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  380.683,375.869 380.683,31.4961 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  433.663,375.869 433.663,31.4961 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,362.624 446.908,362.624 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,309.643 446.908,309.643 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,256.663 446.908,256.663 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,203.682 446.908,203.682 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,150.702 446.908,150.702 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,97.7216 446.908,97.7216 
  "></polyline><polyline clip-path="url(#clip1802)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,44.7412 446.908,44.7412 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 446.908,375.869 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 102.536,31.4961 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  115.781,375.869 115.781,370.703 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  168.761,375.869 168.761,370.703 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  221.742,375.869 221.742,370.703 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  274.722,375.869 274.722,370.703 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  327.702,375.869 327.702,370.703 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  380.683,375.869 380.683,370.703 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  433.663,375.869 433.663,370.703 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,362.624 107.701,362.624 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,309.643 107.701,309.643 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,256.663 107.701,256.663 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,203.682 107.701,203.682 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,150.702 107.701,150.702 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,97.7216 107.701,97.7216 
  "></polyline><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,44.7412 107.701,44.7412 
  "></polyline><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 115.781, 389.669)" x="115.781" y="389.669">0</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 168.761, 389.669)" x="168.761" y="389.669">2</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 221.742, 389.669)" x="221.742" y="389.669">4</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 274.722, 389.669)" x="274.722" y="389.669">6</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 327.702, 389.669)" x="327.702" y="389.669">8</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 380.683, 389.669)" x="380.683" y="389.669">10</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 433.663, 389.669)" x="433.663" y="389.669">12</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 367.124)" x="96.5358" y="367.124">0</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 314.143)" x="96.5358" y="314.143">2</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 261.163)" x="96.5358" y="261.163">4</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 208.182)" x="96.5358" y="208.182">6</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 155.202)" x="96.5358" y="155.202">8</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 102.222)" x="96.5358" y="102.222">10</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 49.2412)" x="96.5358" y="49.2412">12</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:21; text-anchor:middle;" transform="rotate(0, 274.722, 18)" x="274.722" y="18">Sawtooth wave on 12-tone octave</text></g><g clip-path="url(#clip1802)"><image width="344" height="344" xlink:href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAVgAAAFYCAYAAAAWbORAAAAIzElEQVR4nO3Wy8sldB3H8c95nvM8
c9NRR5nxmiMYOaJpiUSEWSS1KYiWIe2SiAraSNQ6WoaLIqygi7gJIshNEkVJkFoWXuni3VEnc/I2
41yeeU6L/oU+3xa9Xv/A5xz4nff5LhbZWGXIAx++ZWTnJ3+9cmQnSR7816mRnaN5c2QnSZ5ZPTyy
c8naoZGdJHl2608jOxduzH2n5WpjZOfa5SUjO0nyuateGtm55f6fjeysjawA/B8SWIASgQUoEViA
EoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgRWIAS
gQUoEViAEoEFKBFYgBKBBSgRWICSxVcv++JqauwLH/rtyM7vH712ZCdJnnxj78jOE68vR3aSZLmY
2Tkz9vKSY1szY5ftGZlJkly86/TIzieueXhkJ0m+/4cbRnY+cslLIzsuWIASgQUoEViAEoEFKBFY
gBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUoEViA
EoEFKBFYgBKBBSgRWICS5W9ePT429vFn3zGyc+T47pGdJHno6HJkZ7VajewkyXOnZt7E/uWukZ0k
ObZ1ZmTnirNm3kOSXHP+qyM7n7n30MhOkvzoo38c2fnKr28Y2XHBApQILECJwAKUCCxAicAClAgs
QInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxA
icAClAgsQInAApQILEDJ8sW1l8bGTm/tGNl55tjMTpLsXJ/Zeer4yZmhQZP/7gd2bozs3HThkZGd
JLntsbdGdu68dmQmSfLzR989svPI1uGRHRcsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJ
wAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQMny
rNXZY2NvnJzp+cW7To/sJMkLxzZHdvYtZ3aSZHs1s3PonMXMUJLrznttZOf2J0ZmkiTfOrR3ZOdX
h/eP7CTJ1tDb21rMNMIFC1AisAAlAgtQIrAAJQILUCKwACUCC1AisAAlAgtQIrAAJQILUCKwACUC
C1AisAAlAgtQIrAAJQILUCKwACUCC1AisAAlAgtQIrAAJQILUCKwACUCC1AisAAly7+fvn9sbJH3
j+w889bmyE6SnNxejexsrWZ2kmTf5vrIznvPPzqykyS3Pn7fyM4Pr7p5ZCdJ7n7q3JGdIydOj+wk
yfmby5Gdl08/MbLjggUoEViAEoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUo
EViAEoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUoWb5r+YGxsd2bJ0Z2rjz7
5MhOkuxabo7snLOxGtlJkusveHlk5/ZHlyM7SXLX1TeN7Dz06jkjO0lyfGt7ZGfPcn1k5z9bi5Gd
y5fvGdlxwQKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAC
lAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAyfLI2vNjY+uLfSM7O9bPjOwk
yWW7T47sXLXvnyM7SfLpR14Z2fnBNReN7CTJ3U9eOLLz2qntkZ0keeXM22NbU/bv2DOyc3j7iZEd
FyxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQI
LECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAyfKK7XeOjV164PGRnb27j4/sJMnes98c2bn1
F1eP7CTJ3dfN7Dxw5IKZoSRHT50Z2VkuFiM7SbKR9ZGdizZ3jOwkydZqZufg4t0jOy5YgBKBBSgR
WIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBSgRWIASgQUoEViAEoEFKBFY
gBKBBSgRWIASgQUoEViAEoEFKBFYgBKBBShZXr1nz9jYpTf9eWRnsbYa2UmSz3/9tpGduz724MhO
ktz7+LUjO6+fXh/ZSZIdQ6fEjrXFzFCSczd3juycODMykyQ5dM7WyM7Tx88e2XHBApQILECJwAKU
CCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQI
LECJwAKUCCxAicAClAgsQInAApQsP3X5P8bG1r/83ZGde2+8Z2QnSb79tTtHdh6754MjO0mysbY9
snPJrlMjO0ny9taOkZ2DZ819pxff3hjZObjn5MhOkhzYfXxk58YT543suGABSgQWoERgAUoEFqBE
YAFKBBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQWoERgAUoEFqBEYAFKBBagRGABSgQWoERg
AUoEFqBEYAFKBBagRGABSgQWoGRx6o6dq//1h/hvW/vS98a2znzzsyM7L9x3/chOkrxw5MDIzpnV
+shOkhw/tTmyM/lj2rvjxMjOxnJrZCdJDl7+3MjO4RcuHtlxwQKUCCxAicAClAgsQInAApQILECJ
wAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInA
ApQILECJwAKULBbZWE2NnbxjfWTnlz/+5MhOkvz02f0jO48fOzaykyRPr/1tZOfA9mUjO0nyl63f
jexcufG+kZ0keWvx5sjOxdsXjewkyc3n7x7Z+cbz3xnZccEClAgsQInAApQILECJwAKUCCxAicAC
lAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKUCCxAicAClAgsQInAApQILECJwAKU
CCxAicAClPwbbw/sYKD0+WgAAAAASUVORK5CYII=
" transform="translate(103, 31)"></image></g><defs><clippath id="clip1803"><rect x="458" y="31" width="19" height="345"></rect></clippath></defs><g clip-path="url(#clip1803)"><image width="18" height="344" xlink:href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAABIAAAFYCAYAAABeeqzpAAACFklEQVR4nO3cwbHcMAwEUcjF/KNw
lv4mHYIu79BmiQFMaRrACKta6fnZv8+A80uIzMysfX6M0EFCztrZMWtFRsxaDXaQ0ShGSsgxmo/R
21mz/yChGmzJCFl7zl8jNNsIOUYPuiJmbQ2CfTMjdUVy1pi1bYR6s5Yr/xoE++JZS5afjUit/O4u
ci+jXEIGGeXKv2aThzX0Z9bH6OV8ffR+pDWi44Tk40MkdDEjZ81MyKyzHyJUZISsrXN6jJA1JSSf
HsesrdnG3c2MgjFyjBazVmSEOrvXkHKt+Ri9nCCj3qwdlUcXZzYsf6wh5azFtloGO9lHMdgXZ3ax
/LU+kv9ji5U/yCjYR/fO2v4Y/X9CQUZfH70L5cJf3tdi5WdXFOyjmxlNzFpy1pBQ0Zoqv+qjixm5
GCEyyah1sFFDBvvI5VGOUW5EinmkhHJDK9caJATzyJxgHuVgF1c/t2cTHZpHbD8iOsU+giNihK4u
v9FJRu29jKC1a6M2FyNJRrHyJ1e/mtDNjIyOS8ggo1ywyTwyl9SD/fXR+0nuR7XXznLWkutxzFpx
RHJRG5w1NyIxIXk7QtZysOVjn5i1ddAblUVGD3ovewcZIWuq/Gs/vVmLlT85a+gLKJBR7bNFuT6S
a81X/pcDE1J9bqYXI6dmLdhHufKzqgXzKNeQyVmLwQ5m9lEfvu310aif63NvHjlrSkh9sy44awr2
P2ju578jfRXaAAAAAElFTkSuQmCC
" transform="translate(459, 31)"></image></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 333.271)" x="485.908" y="333.271">0.5</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 283.553)" x="485.908" y="283.553">1.0</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 233.836)" x="485.908" y="233.836">1.5</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 184.118)" x="485.908" y="184.118">2.0</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 134.4)" x="485.908" y="134.4">2.5</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 84.6825)" x="485.908" y="84.6825">3.0</text></g><g clip-path="url(#clip1800)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 34.9647)" x="485.908" y="34.9647">3.5</text></g><polyline clip-path="url(#clip1800)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  476.908,375.869 476.908,329.858 482.908,329.858 476.908,329.858 476.908,280.141 482.908,280.141 476.908,280.141 476.908,230.423 482.908,230.423 476.908,230.423 
  476.908,180.705 482.908,180.705 476.908,180.705 476.908,130.987 482.908,130.987 476.908,130.987 476.908,81.2697 482.908,81.2697 476.908,81.2697 476.908,31.5519 
  482.908,31.5519 476.908,31.5519 476.908,31.4961 
  "></polyline></svg>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Bohlen-Pierce-Scale">Bohlen-Pierce Scale<a class="anchor-link" href="#Bohlen-Pierce-Scale">¶</a>
</h3>
<p>One way to view the conventional western scale is as a division of an octave (that is, a 2:1 ratio of frequency) in 12 (more or less) equal steps. Alternatively, one can start at the ratios 4:5:6 (appearing naturally as harmonics) and collect pitches that are reached from these recursively.</p>
<p>In the <a href="http://www.huygens-fokker.org/bpsite/">Bohlen-Pierce</a> scale, we range over a tritave (a 3:1 ratio) in 13 steps. This can also be derived using ratios 3:5:7. The scale is well-suited for instruments that only feature <a href="https://www.soundonsound.com/techniques/synthesizing-pan-pipes">odd harmonics</a>, such as the <a href="https://en.wikipedia.org/wiki/Clarinet#Acoustics">clarinet</a> or the <a href="http://bohlen-pierce-conference.org/bohlen-pierce-instruments/pan-flute">pan flute</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># range of one tritave</span>
<span class="n">bpstep</span> <span class="o">=</span> <span class="mf">3.0</span><span class="o">^</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">13.0</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">bpstep</span>
<span class="n">ratrange</span> <span class="o">=</span> <span class="p">[</span><span class="n">bpstep</span><span class="o">^</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">:</span><span class="mi">13</span><span class="p">]</span>

<span class="n">basefreq</span> <span class="o">=</span> <span class="mf">440.0</span>
<span class="n">otherfreq</span> <span class="o">=</span> <span class="n">basefreq</span> <span class="o">*</span> <span class="n">ratrange</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>bpstep = 1.0881822434633168
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># start with square wave again</span>
<span class="n">numharm</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">basetone</span> <span class="o">=</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">Square</span><span class="p">(),</span> <span class="n">basefreq</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span>
<span class="n">othertones</span> <span class="o">=</span> <span class="p">[</span><span class="n">harmonics</span><span class="p">(</span><span class="n">Square</span><span class="p">(),</span> <span class="n">of</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span> <span class="k">for</span> <span class="n">of</span> <span class="kp">in</span> <span class="n">otherfreq</span><span class="p">]</span>

<span class="c"># compute dissonances of all triads</span>
<span class="n">disss</span> <span class="o">=</span> <span class="p">[</span><span class="n">diss</span><span class="p">(</span><span class="n">basetone</span><span class="p">,</span> <span class="n">ot1</span><span class="p">,</span> <span class="n">ot2</span><span class="p">)</span> <span class="k">for</span> <span class="n">ot1</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">,</span> <span class="n">ot2</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">]</span>

<span class="n">heatmap</span><span class="p">(</span><span class="mi">0</span><span class="o">:</span><span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="o">:</span><span class="mi">13</span><span class="p">,</span> <span class="n">disss</span><span class="p">,</span> <span class="n">aspect_ratio</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">"Square wave on BP tritave"</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[20]:</div>



<div class="output_svg output_subarea output_execute_result">
<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewbox="0 0 600 400"><defs><clippath id="clip2000"><rect x="0" y="0" width="600" height="400"></rect></clippath></defs><polygon clip-path="url(#clip2000)" points="
0,400 600,400 600,0 0,0 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip2001"><rect x="120" y="0" width="421" height="400"></rect></clippath></defs><polygon clip-path="url(#clip2000)" points="
102.536,375.869 446.908,375.869 446.908,31.4961 102.536,31.4961 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip2002"><rect x="102" y="31" width="345" height="345"></rect></clippath></defs><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  114.835,375.869 114.835,31.4961 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  164.031,375.869 164.031,31.4961 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  213.227,375.869 213.227,31.4961 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  262.423,375.869 262.423,31.4961 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  311.619,375.869 311.619,31.4961 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  360.815,375.869 360.815,31.4961 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  410.011,375.869 410.011,31.4961 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,363.57 446.908,363.57 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,314.374 446.908,314.374 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,265.177 446.908,265.177 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,215.981 446.908,215.981 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,166.785 446.908,166.785 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,117.589 446.908,117.589 
  "></polyline><polyline clip-path="url(#clip2002)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,68.3931 446.908,68.3931 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 446.908,375.869 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 102.536,31.4961 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  114.835,375.869 114.835,370.703 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  164.031,375.869 164.031,370.703 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  213.227,375.869 213.227,370.703 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  262.423,375.869 262.423,370.703 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  311.619,375.869 311.619,370.703 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  360.815,375.869 360.815,370.703 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  410.011,375.869 410.011,370.703 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,363.57 107.701,363.57 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,314.374 107.701,314.374 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,265.177 107.701,265.177 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,215.981 107.701,215.981 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,166.785 107.701,166.785 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,117.589 107.701,117.589 
  "></polyline><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,68.3931 107.701,68.3931 
  "></polyline><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 114.835, 389.669)" x="114.835" y="389.669">0</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 164.031, 389.669)" x="164.031" y="389.669">2</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 213.227, 389.669)" x="213.227" y="389.669">4</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 262.423, 389.669)" x="262.423" y="389.669">6</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 311.619, 389.669)" x="311.619" y="389.669">8</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 360.815, 389.669)" x="360.815" y="389.669">10</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 410.011, 389.669)" x="410.011" y="389.669">12</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 368.07)" x="96.5358" y="368.07">0</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 318.874)" x="96.5358" y="318.874">2</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 269.677)" x="96.5358" y="269.677">4</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 220.481)" x="96.5358" y="220.481">6</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 171.285)" x="96.5358" y="171.285">8</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 122.089)" x="96.5358" y="122.089">10</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 72.8931)" x="96.5358" y="72.8931">12</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:21; text-anchor:middle;" transform="rotate(0, 274.722, 18)" x="274.722" y="18">Square wave on BP tritave</text></g><g clip-path="url(#clip2002)"><image width="344" height="344" xlink:href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAVgAAAFYCAYAAAAWbORAAAAI3UlEQVR4nO3dy6vndR3H8ff3nN85
M+NlVMbJG14oSrLSTVi0jHIhtQjCRVaLkAwXLaJFQWBFUUEIGUaFuCiEalGbCJKoTYS2SghBrKjE
W6NpmpeZM+d8W9if0HNKejz+gNd7zvmd35PPbpaZzTqxn1//gfrEfPH356X7v9v/Vbo/M/PK3ol0
f52DdH9mZplNfGBp92dmPTiZ35iJv3bLVrs/M4d3Lkr3bzv2vnR/Zubrj38r3e8/BYD/UwILEBFY
gIjAAkQEFiAisAARgQWICCxARGABIgILEBFYgIjAAkQEFiAisAARgQWICCxARGABIgILEBFYgIjA
AkQEFiAisAARgQWICCxAZHPdWTflRw5vXspvXHHorHT/xN616f7MzHObJ9L97WU33Z+ZWWfNL9T2
Dl7Ob2wtO+n+0eXCdH9m5qPHrkr3f3zi6XR/ZubTl96W7nvBAkQEFiAisAARgQWICCxARGABIgIL
EBFYgIjAAkQEFiAisAARgQWICCxARGABIgILEBFYgIjAAkQEFiAisAARgQWICCxARGABIgILEBFY
gMjmoVO/yI889sKN+Y3HT76S7j+1PpLuz8ycPP1cur+m6/++sZ5u98/AT7Gu+/mNs3cvTvdvOPf6
dH9m5kuP/SDd/9xlN6X7MzNfe/Kn6b4XLEBEYAEiAgsQEViAiMACRAQWICKwABGBBYgILEBEYAEi
AgsQEViAiMACRAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRAQWICKwAJHN/v4/8yN7B33HT83p
dH+dNd2fmTl9cDK+cBDvz6zrfrq/LDvp/szMkZ0L8xs3H313uv/tv92d7s/M3Hr8lnT/e8/8Kd2f
mXll76l03wsWICKwABGBBYgILEBEYAEiAgsQEViAiMACRAQWICKwABGBBYgILEBEYAEiAgsQEViA
iMACRAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRDZn4sh6Bm7szPYZuFJrf1PrHKT7MzNbW7vp
/tHdK9L9mZkPn/eu/MY3n7w73f/E625J92dm7n3+l+n+7tY56f7MzKztd8ILFiAisAARgQWICCxA
RGABIgILEBFYgIjAAkQEFiAisAARgQWICCxARGABIgILEBFYgIjAAkQEFiAisAARgQWICCxARGAB
IgILEBFYgMhmnf38yPay5jcOpr2xxv9/+sxM/VlsL4fS/ZmZ8w5dme7fcsH16f7MzFcf+05+45MX
35ru3/Psfen+zMzLe0+n+5v4b+lVS7ruBQsQEViAiMACRAQWICKwABGBBYgILEBEYAEiAgsQEViA
iMACRAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRAQWICKwABGBBYgILEBEYAEim+2ts/sjy5rf
2JntdH972aT7MzOHts9P94/vvjHdn5m55cL2xhcevTfdn5n5zGUfz2989++/Sfdf3nsm3Z+ZWZb2
O7ezdSTdn5lZtg6l+16wABGBBYgILEBEYAEiAgsQEViAiMACRAQWICKwABGBBYgILEBEYAEiAgsQ
EViAiMACRAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRDbrHORH1vzCzEF8ZXfr7HR/ZubY9lXp
/q0XXZ7uz8x89s/3pvufv/zmdH9m5s4Tv81vPH/qr+n+uu6l+zMzW8vh+MIS78/M2nbDCxYgIrAA
EYEFiAgsQERgASICCxARWICIwAJEBBYgIrAAEYEFiAgsQERgASICCxARWICIwAJEBBYgIrAAEYEF
iAgsQERgASICCxARWICIwAJENsts50eWWfMb527tpPtvOnhruj8zc9Ol7WfxqT/9MN2fmfnKVR9K
9+966pF0f2bmHyf/kt84WPfS/WU5A9/rZdPuz5Luz8ysczrd94IFiAgsQERgASICCxARWICIwAJE
BBYgIrAAEYEFiAgsQERgASICCxARWICIwAJEBBYgIrAAEYEFiAgsQERgASICCxARWICIwAJEBBYg
IrAAkc2ZOHLu7qn8xtVHt9P9tx87ne7PzHzkoZ+k+3e8/oPp/szMN554NN0/ceqRdH9mZn89md9Y
pv17nVni/f7C/tp3Y4nfmF6wABGBBYgILEBEYAEiAgsQEViAiMACRAQWICKwABGBBYgILEBEYAEi
AgsQEViAiMACRAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRDbHj7wlP3Ld1Q/nN972hj+k++/8
2ZF0f2bm+9e8P92/64/76f7MzAvLiXR/d/ucdH9mZnvrcH5jWV77b5tllnT//OWSdH9m5sWd9u/1
tf8pA/yPEliAiMACRAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRAQWICKwABGBBYgILEBEYAEi
AgsQEViAiMACRAQWICKwABGBBYgILEBEYAEim49dcF1+5JJ735HfuP2KB9L9+2+8P92fmbnz10fT
/fO39tP9mZk3H1yb7m8tS7o/M7O39L+nrWl/jr3pf4bd2aT7l+4cTvdnZo4fHEv3vWABIgILEBFY
gIjAAkQEFiAisAARgQWICCxARGABIgILEBFYgIjAAkQEFiAisAARgQWICCxARGABIgILEBFYgIjA
AkQEFiAisAARgQWILHv3Xbn+t/8R/wnLe7+c7j9x8x3p/szMgw9fne6/cGo33Z+ZWWdJ99v1V51e
+yv78Y0z8Xva2TpI9y8797l0f2bmldM76b4XLEBEYAEiAgsQEViAiMACRAQWICKwABGBBYgILEBE
YAEiAgsQEViAiMACRAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRAQWICKwABGBBYhsdm54LD+y
d99l+Y3br3gg3b/n2XPS/ZmZEy/fl9+orbOf7i9n4E2wf/BifmOZ7fxGbXu7/U5cs/uedH9m5sGX
fpTue8ECRAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRAQWICKwABGBBYgILEBEYAEiAgsQEViA
iMACRAQWICKwABGBBYgILEBEYAEiAgsQ+RcoavKg8e4wbgAAAABJRU5ErkJggg==
" transform="translate(103, 31)"></image></g><defs><clippath id="clip2003"><rect x="458" y="31" width="19" height="345"></rect></clippath></defs><g clip-path="url(#clip2003)"><image width="18" height="344" xlink:href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAABIAAAFYCAYAAABeeqzpAAACFklEQVR4nO3cwbHcMAwEUcjF/KNw
lv4mHYIu79BmiQFMaRrACKta6fnZv8+A80uIzMysfX6M0EFCztrZMWtFRsxaDXaQ0ShGSsgxmo/R
21mz/yChGmzJCFl7zl8jNNsIOUYPuiJmbQ2CfTMjdUVy1pi1bYR6s5Yr/xoE++JZS5afjUit/O4u
ci+jXEIGGeXKv2aThzX0Z9bH6OV8ffR+pDWi44Tk40MkdDEjZ81MyKyzHyJUZISsrXN6jJA1JSSf
HsesrdnG3c2MgjFyjBazVmSEOrvXkHKt+Ri9nCCj3qwdlUcXZzYsf6wh5azFtloGO9lHMdgXZ3ax
/LU+kv9ji5U/yCjYR/fO2v4Y/X9CQUZfH70L5cJf3tdi5WdXFOyjmxlNzFpy1pBQ0Zoqv+qjixm5
GCEyyah1sFFDBvvI5VGOUW5EinmkhHJDK9caJATzyJxgHuVgF1c/t2cTHZpHbD8iOsU+giNihK4u
v9FJRu29jKC1a6M2FyNJRrHyJ1e/mtDNjIyOS8ggo1ywyTwyl9SD/fXR+0nuR7XXznLWkutxzFpx
RHJRG5w1NyIxIXk7QtZysOVjn5i1ddAblUVGD3ovewcZIWuq/Gs/vVmLlT85a+gLKJBR7bNFuT6S
a81X/pcDE1J9bqYXI6dmLdhHufKzqgXzKNeQyVmLwQ5m9lEfvu310aif63NvHjlrSkh9sy44awr2
P2ju578jfRXaAAAAAElFTkSuQmCC
" transform="translate(459, 31)"></image></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 338.463)" x="485.908" y="338.463">0.25</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 297.631)" x="485.908" y="297.631">0.50</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 256.799)" x="485.908" y="256.799">0.75</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 215.967)" x="485.908" y="215.967">1.00</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 175.136)" x="485.908" y="175.136">1.25</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 134.304)" x="485.908" y="134.304">1.50</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 93.472)" x="485.908" y="93.472">1.75</text></g><g clip-path="url(#clip2000)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 52.6402)" x="485.908" y="52.6402">2.00</text></g><polyline clip-path="url(#clip2000)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  476.908,375.869 476.908,335.05 482.908,335.05 476.908,335.05 476.908,294.218 482.908,294.218 476.908,294.218 476.908,253.386 482.908,253.386 476.908,253.386 
  476.908,212.555 482.908,212.555 476.908,212.555 476.908,171.723 482.908,171.723 476.908,171.723 476.908,130.891 482.908,130.891 476.908,130.891 476.908,90.0592 
  482.908,90.0592 476.908,90.0592 476.908,49.2274 482.908,49.2274 476.908,49.2274 476.908,31.4961 
  "></polyline></svg>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The heatmap above looks fairly boring, with not much dissonance apart from the obvious lines. Maybe this is related to the wider spacing of the steps in this scale.</p>
<p>We will also look at the sawtooth wave, even though we should expect high dissonance through-out.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># now use richer sawtooth wave</span>
<span class="n">numharm</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">basetone</span> <span class="o">=</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">basefreq</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span>
<span class="n">othertones</span> <span class="o">=</span> <span class="p">[</span><span class="n">harmonics</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">of</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span> <span class="k">for</span> <span class="n">of</span> <span class="kp">in</span> <span class="n">otherfreq</span><span class="p">]</span>

<span class="c"># compute dissonances of all triads</span>
<span class="n">disss</span> <span class="o">=</span> <span class="p">[</span><span class="n">diss</span><span class="p">(</span><span class="n">basetone</span><span class="p">,</span> <span class="n">ot1</span><span class="p">,</span> <span class="n">ot2</span><span class="p">)</span> <span class="k">for</span> <span class="n">ot1</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">,</span> <span class="n">ot2</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">]</span>

<span class="n">heatmap</span><span class="p">(</span><span class="mi">0</span><span class="o">:</span><span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="o">:</span><span class="mi">13</span><span class="p">,</span> <span class="n">disss</span><span class="p">,</span> <span class="n">aspect_ratio</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">"Sawtooth wave on BP tritave"</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[21]:</div>



<div class="output_svg output_subarea output_execute_result">
<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewbox="0 0 600 400"><defs><clippath id="clip2200"><rect x="0" y="0" width="600" height="400"></rect></clippath></defs><polygon clip-path="url(#clip2200)" points="
0,400 600,400 600,0 0,0 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip2201"><rect x="120" y="0" width="421" height="400"></rect></clippath></defs><polygon clip-path="url(#clip2200)" points="
102.536,375.869 446.908,375.869 446.908,31.4961 102.536,31.4961 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip2202"><rect x="102" y="31" width="345" height="345"></rect></clippath></defs><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  114.835,375.869 114.835,31.4961 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  164.031,375.869 164.031,31.4961 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  213.227,375.869 213.227,31.4961 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  262.423,375.869 262.423,31.4961 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  311.619,375.869 311.619,31.4961 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  360.815,375.869 360.815,31.4961 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  410.011,375.869 410.011,31.4961 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,363.57 446.908,363.57 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,314.374 446.908,314.374 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,265.177 446.908,265.177 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,215.981 446.908,215.981 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,166.785 446.908,166.785 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,117.589 446.908,117.589 
  "></polyline><polyline clip-path="url(#clip2202)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,68.3931 446.908,68.3931 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 446.908,375.869 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 102.536,31.4961 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  114.835,375.869 114.835,370.703 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  164.031,375.869 164.031,370.703 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  213.227,375.869 213.227,370.703 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  262.423,375.869 262.423,370.703 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  311.619,375.869 311.619,370.703 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  360.815,375.869 360.815,370.703 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  410.011,375.869 410.011,370.703 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,363.57 107.701,363.57 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,314.374 107.701,314.374 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,265.177 107.701,265.177 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,215.981 107.701,215.981 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,166.785 107.701,166.785 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,117.589 107.701,117.589 
  "></polyline><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,68.3931 107.701,68.3931 
  "></polyline><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 114.835, 389.669)" x="114.835" y="389.669">0</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 164.031, 389.669)" x="164.031" y="389.669">2</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 213.227, 389.669)" x="213.227" y="389.669">4</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 262.423, 389.669)" x="262.423" y="389.669">6</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 311.619, 389.669)" x="311.619" y="389.669">8</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 360.815, 389.669)" x="360.815" y="389.669">10</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 410.011, 389.669)" x="410.011" y="389.669">12</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 368.07)" x="96.5358" y="368.07">0</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 318.874)" x="96.5358" y="318.874">2</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 269.677)" x="96.5358" y="269.677">4</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 220.481)" x="96.5358" y="220.481">6</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 171.285)" x="96.5358" y="171.285">8</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 122.089)" x="96.5358" y="122.089">10</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 72.8931)" x="96.5358" y="72.8931">12</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:21; text-anchor:middle;" transform="rotate(0, 274.722, 18)" x="274.722" y="18">Sawtooth wave on BP tritave</text></g><g clip-path="url(#clip2202)"><image width="344" height="344" xlink:href="data:image/png;base64,
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
wu4i3Z+Z+e320+m+FyxARGABIgILEBFYgIjAAkQEFiAisAARgQWICCxARGABIgILEBFYgIjAAkQE
FiAisAARgQWICCxARGABIgILEBFYgIjAAkQEFiAisAARgQWILO547kF+ZPPjH8tv3HP6p+n+vXd/
K92fmfnG9+9I97cW++n+zMwtx9fS/ZuOXkn3Z2ZOrO/mN06fOJ/uv2RnPd2fmfnLzka6/+CFo+n+
zMwL10+m+16wABGBBYgILEBEYAEiAgsQEViAiMACRAQWICKwABGBBYgILEBEYAEiAgsQEViAiMAC
RAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRFb27rv+8J/9j/i7eNf/pPOXPvLRdH9m5smHbkr3
9/eW6f7MzPbOerq/uXkx3Z+ZufFVv8lvLG4+SPef+eGpdH9m5sHfn073NzeupPszM+eePZnue8EC
RAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRAQWICKwABGBBYgILEBEYAEiAgsQEViAiMACRAQW
ICKwABGBBYgILEBEYAEiAgsQEViAyMrKLA/rI7v3naxPzCc/9O50/weP97+LLhzspPsHk3+r54mV
p9P9V2+cSvdnZl537XZ+4697a+n+5879Kd2fmdmf3XT/xoOb0v2ZmfsvfSnd94IFiAgsQERgASIC
CxARWICIwAJEBBYgIrAAEYEFiAgsQERgASICCxARWICIwAJEBBYgIrAAEYEFiAgsQERgASICCxAR
WICIwAJEBBYg8jeVXgkrnFphuwAAAABJRU5ErkJggg==
" transform="translate(103, 31)"></image></g><defs><clippath id="clip2203"><rect x="458" y="31" width="19" height="345"></rect></clippath></defs><g clip-path="url(#clip2203)"><image width="18" height="344" xlink:href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAABIAAAFYCAYAAABeeqzpAAACFklEQVR4nO3cwbHcMAwEUcjF/KNw
lv4mHYIu79BmiQFMaRrACKta6fnZv8+A80uIzMysfX6M0EFCztrZMWtFRsxaDXaQ0ShGSsgxmo/R
21mz/yChGmzJCFl7zl8jNNsIOUYPuiJmbQ2CfTMjdUVy1pi1bYR6s5Yr/xoE++JZS5afjUit/O4u
ci+jXEIGGeXKv2aThzX0Z9bH6OV8ffR+pDWi44Tk40MkdDEjZ81MyKyzHyJUZISsrXN6jJA1JSSf
HsesrdnG3c2MgjFyjBazVmSEOrvXkHKt+Ri9nCCj3qwdlUcXZzYsf6wh5azFtloGO9lHMdgXZ3ax
/LU+kv9ji5U/yCjYR/fO2v4Y/X9CQUZfH70L5cJf3tdi5WdXFOyjmxlNzFpy1pBQ0Zoqv+qjixm5
GCEyyah1sFFDBvvI5VGOUW5EinmkhHJDK9caJATzyJxgHuVgF1c/t2cTHZpHbD8iOsU+giNihK4u
v9FJRu29jKC1a6M2FyNJRrHyJ1e/mtDNjIyOS8ggo1ywyTwyl9SD/fXR+0nuR7XXznLWkutxzFpx
RHJRG5w1NyIxIXk7QtZysOVjn5i1ddAblUVGD3ovewcZIWuq/Gs/vVmLlT85a+gLKJBR7bNFuT6S
a81X/pcDE1J9bqYXI6dmLdhHufKzqgXzKNeQyVmLwQ5m9lEfvu310aif63NvHjlrSkh9sy44awr2
P2ju578jfRXaAAAAAElFTkSuQmCC
" transform="translate(459, 31)"></image></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 320.596)" x="485.908" y="320.596">0.5</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 257.121)" x="485.908" y="257.121">1.0</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 193.645)" x="485.908" y="193.645">1.5</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 130.169)" x="485.908" y="130.169">2.0</text></g><g clip-path="url(#clip2200)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 66.6938)" x="485.908" y="66.6938">2.5</text></g><polyline clip-path="url(#clip2200)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  476.908,375.869 476.908,317.183 482.908,317.183 476.908,317.183 476.908,253.708 482.908,253.708 476.908,253.708 476.908,190.232 482.908,190.232 476.908,190.232 
  476.908,126.757 482.908,126.757 476.908,126.757 476.908,63.281 482.908,63.281 476.908,63.281 476.908,31.4961 
  "></polyline></svg>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Larger-Pitch-Ranges">Larger Pitch Ranges<a class="anchor-link" href="#Larger-Pitch-Ranges">¶</a>
</h3>
<p>We will generate some more heatmaps covering two octaves or tritaves, each time based on sawtooth waves.</p>
<p>First the 12-tone octaves:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># range of two octaves</span>
<span class="n">ratrange</span> <span class="o">=</span> <span class="p">[</span><span class="n">halfstep</span><span class="o">^</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">:</span><span class="mi">24</span><span class="p">]</span>
<span class="n">basefreq</span> <span class="o">=</span> <span class="mf">440.0</span>
<span class="n">otherfreq</span> <span class="o">=</span> <span class="n">basefreq</span> <span class="o">*</span> <span class="n">ratrange</span>

<span class="c"># sawtooth wave</span>
<span class="n">numharm</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">basetone</span> <span class="o">=</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">basefreq</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span>
<span class="n">othertones</span> <span class="o">=</span> <span class="p">[</span><span class="n">harmonics</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">of</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span> <span class="k">for</span> <span class="n">of</span> <span class="kp">in</span> <span class="n">otherfreq</span><span class="p">]</span>

<span class="c"># compute dissonances of all triads</span>
<span class="n">disss</span> <span class="o">=</span> <span class="p">[</span><span class="n">diss</span><span class="p">(</span><span class="n">basetone</span><span class="p">,</span> <span class="n">ot1</span><span class="p">,</span> <span class="n">ot2</span><span class="p">)</span> <span class="k">for</span> <span class="n">ot1</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">,</span> <span class="n">ot2</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">]</span>

<span class="n">heatmap</span><span class="p">(</span><span class="mi">0</span><span class="o">:</span><span class="mi">24</span><span class="p">,</span> <span class="mi">0</span><span class="o">:</span><span class="mi">24</span><span class="p">,</span> <span class="n">disss</span><span class="p">,</span> <span class="n">aspect_ratio</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">"Sawtooth wave on 12-tone octaves"</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[22]:</div>



<div class="output_svg output_subarea output_execute_result">
<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewbox="0 0 600 400"><defs><clippath id="clip2400"><rect x="0" y="0" width="600" height="400"></rect></clippath></defs><polygon clip-path="url(#clip2400)" points="
0,400 600,400 600,0 0,0 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip2401"><rect x="120" y="0" width="421" height="400"></rect></clippath></defs><polygon clip-path="url(#clip2400)" points="
102.536,375.869 446.908,375.869 446.908,31.4961 102.536,31.4961 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip2402"><rect x="102" y="31" width="345" height="345"></rect></clippath></defs><polyline clip-path="url(#clip2402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  109.423,375.869 109.423,31.4961 
  "></polyline><polyline clip-path="url(#clip2402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  178.298,375.869 178.298,31.4961 
  "></polyline><polyline clip-path="url(#clip2402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  247.172,375.869 247.172,31.4961 
  "></polyline><polyline clip-path="url(#clip2402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  316.047,375.869 316.047,31.4961 
  "></polyline><polyline clip-path="url(#clip2402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  384.921,375.869 384.921,31.4961 
  "></polyline><polyline clip-path="url(#clip2402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,368.981 446.908,368.981 
  "></polyline><polyline clip-path="url(#clip2402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,300.107 446.908,300.107 
  "></polyline><polyline clip-path="url(#clip2402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,231.232 446.908,231.232 
  "></polyline><polyline clip-path="url(#clip2402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,162.358 446.908,162.358 
  "></polyline><polyline clip-path="url(#clip2402)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,93.4831 446.908,93.4831 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 446.908,375.869 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 102.536,31.4961 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  109.423,375.869 109.423,370.703 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  178.298,375.869 178.298,370.703 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  247.172,375.869 247.172,370.703 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  316.047,375.869 316.047,370.703 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  384.921,375.869 384.921,370.703 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,368.981 107.701,368.981 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,300.107 107.701,300.107 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,231.232 107.701,231.232 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,162.358 107.701,162.358 
  "></polyline><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,93.4831 107.701,93.4831 
  "></polyline><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 109.423, 389.669)" x="109.423" y="389.669">0</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 178.298, 389.669)" x="178.298" y="389.669">5</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 247.172, 389.669)" x="247.172" y="389.669">10</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 316.047, 389.669)" x="316.047" y="389.669">15</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 384.921, 389.669)" x="384.921" y="389.669">20</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 373.481)" x="96.5358" y="373.481">0</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 304.607)" x="96.5358" y="304.607">5</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 235.732)" x="96.5358" y="235.732">10</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 166.858)" x="96.5358" y="166.858">15</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 97.9831)" x="96.5358" y="97.9831">20</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:21; text-anchor:middle;" transform="rotate(0, 274.722, 18)" x="274.722" y="18">Sawtooth wave on 12-tone octaves</text></g><g clip-path="url(#clip2402)"><image width="344" height="344" xlink:href="data:image/png;base64,
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
FiDJ/wD99nFUa2gmawAAAABJRU5ErkJggg==
" transform="translate(103, 31)"></image></g><defs><clippath id="clip2403"><rect x="458" y="31" width="19" height="345"></rect></clippath></defs><g clip-path="url(#clip2403)"><image width="18" height="344" xlink:href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAABIAAAFYCAYAAABeeqzpAAACFklEQVR4nO3cwbHcMAwEUcjF/KNw
lv4mHYIu79BmiQFMaRrACKta6fnZv8+A80uIzMysfX6M0EFCztrZMWtFRsxaDXaQ0ShGSsgxmo/R
21mz/yChGmzJCFl7zl8jNNsIOUYPuiJmbQ2CfTMjdUVy1pi1bYR6s5Yr/xoE++JZS5afjUit/O4u
ci+jXEIGGeXKv2aThzX0Z9bH6OV8ffR+pDWi44Tk40MkdDEjZ81MyKyzHyJUZISsrXN6jJA1JSSf
HsesrdnG3c2MgjFyjBazVmSEOrvXkHKt+Ri9nCCj3qwdlUcXZzYsf6wh5azFtloGO9lHMdgXZ3ax
/LU+kv9ji5U/yCjYR/fO2v4Y/X9CQUZfH70L5cJf3tdi5WdXFOyjmxlNzFpy1pBQ0Zoqv+qjixm5
GCEyyah1sFFDBvvI5VGOUW5EinmkhHJDK9caJATzyJxgHuVgF1c/t2cTHZpHbD8iOsU+giNihK4u
v9FJRu29jKC1a6M2FyNJRrHyJ1e/mtDNjIyOS8ggo1ywyTwyl9SD/fXR+0nuR7XXznLWkutxzFpx
RHJRG5w1NyIxIXk7QtZysOVjn5i1ddAblUVGD3ovewcZIWuq/Gs/vVmLlT85a+gLKJBR7bNFuT6S
a81X/pcDE1J9bqYXI6dmLdhHufKzqgXzKNeQyVmLwQ5m9lEfvu310aif63NvHjlrSkh9sy44awr2
P2ju578jfRXaAAAAAElFTkSuQmCC
" transform="translate(459, 31)"></image></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 333)" x="485.908" y="333">0.5</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 283.327)" x="485.908" y="283.327">1.0</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 233.655)" x="485.908" y="233.655">1.5</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 183.982)" x="485.908" y="183.982">2.0</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 134.31)" x="485.908" y="134.31">2.5</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 84.6372)" x="485.908" y="84.6372">3.0</text></g><g clip-path="url(#clip2400)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 34.9647)" x="485.908" y="34.9647">3.5</text></g><polyline clip-path="url(#clip2400)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  476.908,375.869 476.908,329.587 482.908,329.587 476.908,329.587 476.908,279.914 482.908,279.914 476.908,279.914 476.908,230.242 482.908,230.242 476.908,230.242 
  476.908,180.569 482.908,180.569 476.908,180.569 476.908,130.897 482.908,130.897 476.908,130.897 476.908,81.2244 482.908,81.2244 476.908,81.2244 476.908,31.5519 
  482.908,31.5519 476.908,31.5519 476.908,31.4961 
  "></polyline></svg>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then the BP tritaves:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># range of two tritaves</span>
<span class="n">ratrange</span> <span class="o">=</span> <span class="p">[</span><span class="n">bpstep</span><span class="o">^</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">:</span><span class="mi">26</span><span class="p">]</span>
<span class="n">basefreq</span> <span class="o">=</span> <span class="mf">440.0</span>
<span class="n">otherfreq</span> <span class="o">=</span> <span class="n">basefreq</span> <span class="o">*</span> <span class="n">ratrange</span>

<span class="c"># sawtooth wave</span>
<span class="n">numharm</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">basetone</span> <span class="o">=</span> <span class="n">harmonics</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">basefreq</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span>
<span class="n">othertones</span> <span class="o">=</span> <span class="p">[</span><span class="n">harmonics</span><span class="p">(</span><span class="n">Sawtooth</span><span class="p">(),</span> <span class="n">of</span><span class="p">,</span> <span class="n">numharm</span><span class="p">)</span> <span class="k">for</span> <span class="n">of</span> <span class="kp">in</span> <span class="n">otherfreq</span><span class="p">]</span>

<span class="c"># compute dissonances of all triads</span>
<span class="n">disss</span> <span class="o">=</span> <span class="p">[</span><span class="n">diss</span><span class="p">(</span><span class="n">basetone</span><span class="p">,</span> <span class="n">ot1</span><span class="p">,</span> <span class="n">ot2</span><span class="p">)</span> <span class="k">for</span> <span class="n">ot1</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">,</span> <span class="n">ot2</span> <span class="kp">in</span> <span class="n">othertones</span><span class="p">]</span>

<span class="n">heatmap</span><span class="p">(</span><span class="mi">0</span><span class="o">:</span><span class="mi">26</span><span class="p">,</span> <span class="mi">0</span><span class="o">:</span><span class="mi">26</span><span class="p">,</span> <span class="n">disss</span><span class="p">,</span> <span class="n">aspect_ratio</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">"Sawtooth wave on BP tritaves"</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[23]:</div>



<div class="output_svg output_subarea output_execute_result">
<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewbox="0 0 600 400"><defs><clippath id="clip2600"><rect x="0" y="0" width="600" height="400"></rect></clippath></defs><polygon clip-path="url(#clip2600)" points="
0,400 600,400 600,0 0,0 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip2601"><rect x="120" y="0" width="421" height="400"></rect></clippath></defs><polygon clip-path="url(#clip2600)" points="
102.536,375.869 446.908,375.869 446.908,31.4961 102.536,31.4961 
  " fill="#ffffff" fill-opacity="1"></polygon><defs><clippath id="clip2602"><rect x="102" y="31" width="345" height="345"></rect></clippath></defs><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  108.913,375.869 108.913,31.4961 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  172.686,375.869 172.686,31.4961 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  236.458,375.869 236.458,31.4961 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  300.231,375.869 300.231,31.4961 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  364.004,375.869 364.004,31.4961 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  427.777,375.869 427.777,31.4961 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,369.491 446.908,369.491 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,305.719 446.908,305.719 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,241.946 446.908,241.946 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,178.173 446.908,178.173 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,114.401 446.908,114.401 
  "></polyline><polyline clip-path="url(#clip2602)" style="stroke:#000000; stroke-width:0.5; stroke-opacity:0.1; fill:none" points="
  102.536,50.6279 446.908,50.6279 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 446.908,375.869 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,375.869 102.536,31.4961 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  108.913,375.869 108.913,370.703 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  172.686,375.869 172.686,370.703 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  236.458,375.869 236.458,370.703 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  300.231,375.869 300.231,370.703 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  364.004,375.869 364.004,370.703 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  427.777,375.869 427.777,370.703 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,369.491 107.701,369.491 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,305.719 107.701,305.719 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,241.946 107.701,241.946 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,178.173 107.701,178.173 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,114.401 107.701,114.401 
  "></polyline><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  102.536,50.6279 107.701,50.6279 
  "></polyline><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 108.913, 389.669)" x="108.913" y="389.669">0</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 172.686, 389.669)" x="172.686" y="389.669">5</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 236.458, 389.669)" x="236.458" y="389.669">10</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 300.231, 389.669)" x="300.231" y="389.669">15</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 364.004, 389.669)" x="364.004" y="389.669">20</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:middle;" transform="rotate(0, 427.777, 389.669)" x="427.777" y="389.669">25</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 373.991)" x="96.5358" y="373.991">0</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 310.219)" x="96.5358" y="310.219">5</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 246.446)" x="96.5358" y="246.446">10</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 182.673)" x="96.5358" y="182.673">15</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 118.901)" x="96.5358" y="118.901">20</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:end;" transform="rotate(0, 96.5358, 55.1279)" x="96.5358" y="55.1279">25</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:21; text-anchor:middle;" transform="rotate(0, 274.722, 18)" x="274.722" y="18">Sawtooth wave on BP tritaves</text></g><g clip-path="url(#clip2602)"><image width="344" height="344" xlink:href="data:image/png;base64,
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
QmCC
" transform="translate(103, 31)"></image></g><defs><clippath id="clip2603"><rect x="458" y="31" width="19" height="345"></rect></clippath></defs><g clip-path="url(#clip2603)"><image width="18" height="344" xlink:href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAABIAAAFYCAYAAABeeqzpAAACFklEQVR4nO3cwbHcMAwEUcjF/KNw
lv4mHYIu79BmiQFMaRrACKta6fnZv8+A80uIzMysfX6M0EFCztrZMWtFRsxaDXaQ0ShGSsgxmo/R
21mz/yChGmzJCFl7zl8jNNsIOUYPuiJmbQ2CfTMjdUVy1pi1bYR6s5Yr/xoE++JZS5afjUit/O4u
ci+jXEIGGeXKv2aThzX0Z9bH6OV8ffR+pDWi44Tk40MkdDEjZ81MyKyzHyJUZISsrXN6jJA1JSSf
HsesrdnG3c2MgjFyjBazVmSEOrvXkHKt+Ri9nCCj3qwdlUcXZzYsf6wh5azFtloGO9lHMdgXZ3ax
/LU+kv9ji5U/yCjYR/fO2v4Y/X9CQUZfH70L5cJf3tdi5WdXFOyjmxlNzFpy1pBQ0Zoqv+qjixm5
GCEyyah1sFFDBvvI5VGOUW5EinmkhHJDK9caJATzyJxgHuVgF1c/t2cTHZpHbD8iOsU+giNihK4u
v9FJRu29jKC1a6M2FyNJRrHyJ1e/mtDNjIyOS8ggo1ywyTwyl9SD/fXR+0nuR7XXznLWkutxzFpx
RHJRG5w1NyIxIXk7QtZysOVjn5i1ddAblUVGD3ovewcZIWuq/Gs/vVmLlT85a+gLKJBR7bNFuT6S
a81X/pcDE1J9bqYXI6dmLdhHufKzqgXzKNeQyVmLwQ5m9lEfvu310aif63NvHjlrSkh9sy44awr2
P2ju578jfRXaAAAAAElFTkSuQmCC
" transform="translate(459, 31)"></image></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 320.596)" x="485.908" y="320.596">0.5</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 257.121)" x="485.908" y="257.121">1.0</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 193.645)" x="485.908" y="193.645">1.5</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 130.169)" x="485.908" y="130.169">2.0</text></g><g clip-path="url(#clip2600)"><text style="fill:#000000; fill-opacity:1; font-family:Arial,Helvetica Neue,Helvetica,sans-serif; font-size:12; text-anchor:start;" transform="rotate(0, 485.908, 66.6938)" x="485.908" y="66.6938">2.5</text></g><polyline clip-path="url(#clip2600)" style="stroke:#000000; stroke-width:1; stroke-opacity:1; fill:none" points="
  476.908,375.869 476.908,317.183 482.908,317.183 476.908,317.183 476.908,253.708 482.908,253.708 476.908,253.708 476.908,190.232 482.908,190.232 476.908,190.232 
  476.908,126.757 482.908,126.757 476.908,126.757 476.908,63.281 482.908,63.281 476.908,63.281 476.908,31.4961 
  "></polyline></svg>
</div>

</div>

</div>
</div>

</div>
    </div>
  </div>

    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/julialang/" rel="tag">julialang</a></li>
            <li><a class="tag p-category" href="../../categories/microtonal/" rel="tag">microtonal</a></li>
            <li><a class="tag p-category" href="../../categories/music/" rel="tag">music</a></li>
            <li><a class="tag p-category" href="../../categories/xenharmonic/" rel="tag">xenharmonic</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../marginal-net-income-in-germany/" rel="prev" title="Marginal Net Income in Germany">Previous post</a>
            </li>
            <li class="next">
                <a href="../infant-formula-cows-milk-and-nutrional-blending/" rel="next" title="Infant Formula, Cow's Milk and Nutrional Blending">Next post</a>
            </li>
        </ul></nav></aside><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha256-SDRP1VVYu+tgAGKhddBSl5+ezofHKZeI+OzxakbIe/Y=" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script></article>
</div>
        <!--End of body content-->

        <footer id="footer"></footer>
</div>
</div>

            <script src="../../assets/js/jquery.min.js"></script><script src="../../assets/js/bootstrap.min.js"></script><script src="../../assets/js/moment-with-locales.min.js"></script><script src="../../assets/js/fancydates.js"></script><script src="../../assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
